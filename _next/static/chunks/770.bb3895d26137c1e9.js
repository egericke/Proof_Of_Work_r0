"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[770,495],{4770:function(e,t,r){r.r(t),r.d(t,{default:function(){return u}});var a=r(5893),s=r(7294),n=r(9558);let l={clock:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),brain:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),calendar:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})},i={blue:"from-blue-400 to-blue-600",purple:"from-purple-400 to-purple-600",green:"from-green-400 to-green-600",amber:"from-amber-400 to-amber-600",red:"from-red-400 to-red-600"};function o(e){let{title:t,hours:r,subtitle:s,icon:n,isLoading:o,color:d="blue"}=e,c=i[d]||i.blue;return o?(0,a.jsxs)("div",{className:"bg-gray-800 bg-opacity-60 rounded-lg border border-blue-500/20 p-4 backdrop-blur-sm animate-pulse",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,a.jsx)("div",{className:"h-4 w-24 bg-gray-700 rounded"}),(0,a.jsx)("div",{className:"h-8 w-8 bg-gray-700 rounded-full"})]}),(0,a.jsx)("div",{className:"h-8 w-20 bg-gray-700 rounded mt-4 mb-2"}),(0,a.jsx)("div",{className:"h-4 w-32 bg-gray-700 rounded"})]}):(0,a.jsxs)("div",{className:"bg-gray-800 bg-opacity-60 rounded-lg border border-blue-500/20 p-4 backdrop-blur-sm transition-all duration-300 hover:shadow-lg hover:shadow-blue-500/10 hover:scale-[1.02]",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-400",children:t}),(0,a.jsx)("div",{className:"p-2 rounded-full bg-gradient-to-br ".concat(c," bg-opacity-20 text-white"),children:l[n]||l.clock})]}),(0,a.jsxs)("div",{className:"mt-4 flex items-baseline",children:[(0,a.jsx)("span",{className:"text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r ".concat(c),children:r}),(0,a.jsx)("span",{className:"ml-1 text-sm text-gray-400",children:"hours"})]}),s&&(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-400",children:s})]})}let d={"Deep Work":"bg-blue-500","Health/Fitness":"bg-green-500",Learning:"bg-purple-500",Social:"bg-amber-500",Rest:"bg-red-400",Other:"bg-gray-500"};function c(e){let{data:t,isLoading:r}=e,s=[...t].sort((e,t)=>t.value-e.value);return r?(0,a.jsxs)("div",{className:"animate-pulse",children:[(0,a.jsx)("div",{className:"h-6 w-32 bg-gray-700 rounded mb-4"}),[,,,,].fill(0).map((e,t)=>(0,a.jsxs)("div",{className:"mb-3",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-1",children:[(0,a.jsx)("div",{className:"h-4 w-24 bg-gray-700 rounded"}),(0,a.jsx)("div",{className:"h-4 w-12 bg-gray-700 rounded"})]}),(0,a.jsx)("div",{className:"h-4 bg-gray-700 rounded-full"})]},t))]}):t&&0!==t.length?(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-6",children:s.map((e,t)=>(0,a.jsxs)("div",{className:"bg-gray-800 bg-opacity-40 rounded-lg p-4 backdrop-blur-sm border border-blue-500/10",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsx)("h4",{className:"text-white font-medium",children:e.name}),(0,a.jsxs)("span",{className:"text-blue-400 font-medium",children:[e.percentage,"%"]})]}),(0,a.jsxs)("div",{className:"mt-2 flex items-baseline",children:[(0,a.jsx)("span",{className:"text-2xl font-semibold text-white",children:e.value.toFixed(1)}),(0,a.jsx)("span",{className:"ml-1 text-sm text-gray-400",children:"hours"})]}),(0,a.jsx)("div",{className:"mt-3 w-full bg-gray-700 rounded-full h-2",children:(0,a.jsx)("div",{className:"h-2 rounded-full ".concat(d[e.name]||"bg-blue-500"),style:{width:"".concat(e.percentage,"%")}})})]},t))}),(0,a.jsxs)("div",{className:"bg-gray-800 bg-opacity-40 rounded-lg p-4 backdrop-blur-sm mt-6",children:[(0,a.jsx)("h4",{className:"text-white font-medium mb-3",children:"Overall Distribution"}),(0,a.jsx)("div",{className:"w-full h-8 flex rounded-full overflow-hidden",children:s.map((e,t)=>(0,a.jsx)("div",{className:"h-full ".concat(d[e.name]||"bg-blue-500"," relative group"),style:{width:"".concat(e.percentage,"%")},children:(0,a.jsxs)("div",{className:"opacity-0 group-hover:opacity-100 absolute bottom-full mb-2 left-1/2 transform -translate-x-1/2 bg-gray-900 text-white text-xs px-2 py-1 rounded pointer-events-none whitespace-nowrap transition-opacity duration-200",children:[e.name,": ",e.percentage,"%"]})},t))}),(0,a.jsx)("div",{className:"mt-4 flex flex-wrap gap-4",children:s.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"w-3 h-3 ".concat(d[e.name]||"bg-blue-500"," rounded-full mr-2")}),(0,a.jsx)("span",{className:"text-sm text-gray-300",children:e.name})]},t))})]})]}):(0,a.jsx)("div",{className:"text-center py-8 text-gray-400",children:"No time data available for the selected period"})}function u(e){let{supabase:t,dateRange:r}=e,[l,i]=(0,s.useState)([]),[d,u]=(0,s.useState)(!0),[b,g]=(0,s.useState)({byBucket:{},byDay:{}});(0,s.useEffect)(()=>{!async function(){u(!0);try{let e=r.startDate.toISOString().split("T")[0],a=r.endDate.toISOString().split("T")[0],{data:s}=await t.from("toggl_time").select("*").gte("date",e).lte("date",a).order("date",{ascending:!0});if(s){i(s);let e=s.reduce((e,t)=>{let r=t.bucket||"Uncategorized";return e[r]=(e[r]||0)+t.hours,e},{}),t=s.reduce((e,t)=>{let r=t.date;e[r]||(e[r]={});let a=t.bucket||"Uncategorized";return e[r][a]=(e[r][a]||0)+t.hours,e},{});g({byBucket:e,byDay:t})}}catch(e){console.error("Error fetching time data:",e)}finally{u(!1)}}()},[t,r]);let m={labels:Object.keys(b.byBucket),datasets:[{data:Object.values(b.byBucket),backgroundColor:["rgba(59, 130, 246, 0.8)","rgba(16, 185, 129, 0.8)","rgba(239, 68, 68, 0.8)","rgba(245, 158, 11, 0.8)","rgba(139, 92, 246, 0.8)"],borderWidth:0}]},x={labels:Object.keys(b.byDay).sort(),datasets:Object.entries(Object.values(b.byDay).reduce((e,t)=>(Object.keys(t).forEach(t=>{e[t]=!0}),e),{})).map((e,t)=>{let[r,a]=e,s=["rgba(59, 130, 246, 0.8)","rgba(16, 185, 129, 0.8)","rgba(239, 68, 68, 0.8)","rgba(245, 158, 11, 0.8)","rgba(139, 92, 246, 0.8)"];return{label:r,data:Object.keys(b.byDay).sort().map(e=>b.byDay[e][r]||0),backgroundColor:s[t%s.length],borderColor:s[t%s.length],borderWidth:2,fill:!1}})},h=Object.values(b.byBucket).reduce((e,t)=>e+t,0),p=b.byBucket["Deep Work"]||0,f=h>0?(p/h*100).toFixed(1):0,v=new Set(l.map(e=>e.date)).size,j=v>0?(h/v).toFixed(1):0;return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-orbitron text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-purple-500",children:"Time Management"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsx)(o,{title:"Total Tracked",hours:h.toFixed(1),icon:"clock",color:"blue",isLoading:d}),(0,a.jsx)(o,{title:"Deep Work",hours:p.toFixed(1),subtitle:"".concat(f,"% of total"),icon:"brain",color:"purple",isLoading:d}),(0,a.jsx)(o,{title:"Daily Average",hours:j,subtitle:"across ".concat(v," days"),icon:"calendar",color:"green",isLoading:d})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-5 gap-6",children:[(0,a.jsxs)("div",{className:"lg:col-span-3 bg-gray-800 bg-opacity-60 rounded-lg border border-blue-500/20 p-4 backdrop-blur-sm",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-blue-300 mb-4",children:"Time Distribution"}),(0,a.jsx)(n.Z,{data:x,type:"line",height:300,isLoading:d,options:{scales:{x:{stacked:!1},y:{stacked:!1,title:{display:!0,text:"Hours"}}}}})]}),(0,a.jsxs)("div",{className:"lg:col-span-2 bg-gray-800 bg-opacity-60 rounded-lg border border-blue-500/20 p-4 backdrop-blur-sm",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-blue-300 mb-4",children:"Focus Categories"}),(0,a.jsx)("div",{className:"h-64 flex items-center justify-center",children:d?(0,a.jsx)("div",{className:"h-full w-full flex items-center justify-center",children:(0,a.jsx)("div",{className:"h-12 w-12 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"})}):Object.keys(b.byBucket).length>0?(0,a.jsx)(n.Z,{data:m,type:"pie",height:250,options:{plugins:{legend:{position:"bottom"}}}}):(0,a.jsx)("div",{className:"text-center text-gray-400",children:"No time data available"})})]})]}),(0,a.jsxs)("div",{className:"bg-gray-800 bg-opacity-60 rounded-lg border border-blue-500/20 p-4 backdrop-blur-sm",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-blue-300 mb-4",children:"Time Allocation"}),(0,a.jsx)(c,{data:Object.entries(b.byBucket).map(e=>{let[t,r]=e;return{name:t,value:r,percentage:h>0?(r/h*100).toFixed(1):0}}),isLoading:d})]})]})}},9558:function(e,t,r){r.d(t,{Z:function(){return o}});var a=r(5893),s=r(7294),n=r(3148),l=r(6495);n.kL.register(n.uw,n.f$,n.od,n.jn,n.ZL,n.qi,n.Dx,n.u,n.De,n.Gu);let i={responsive:!0,maintainAspectRatio:!0,plugins:{legend:{position:"top",labels:{color:"#D1D5DB",boxWidth:12,padding:10,font:{size:11}}},tooltip:{backgroundColor:"rgba(17, 24, 39, 0.8)",titleColor:"#F9FAFB",bodyColor:"#F3F4F6",borderColor:"rgba(59, 130, 246, 0.5)",borderWidth:1,padding:10,cornerRadius:6,displayColors:!0,usePointStyle:!0,boxPadding:3}},scales:{x:{grid:{color:"rgba(31, 41, 55, 0.2)",borderColor:"rgba(31, 41, 55, 0.5)"},ticks:{color:"#9CA3AF",maxRotation:45,minRotation:0,font:{size:10}}},y:{grid:{color:"rgba(31, 41, 55, 0.2)",borderColor:"rgba(31, 41, 55, 0.5)"},ticks:{color:"#9CA3AF",font:{size:10}}}},elements:{line:{tension:.3,borderWidth:2},point:{radius:3,hoverRadius:5,borderWidth:2,backgroundColor:"#1F2937"},bar:{borderRadius:4},arc:{borderWidth:1,borderColor:"#1F2937"}}};function o(e){let{data:t,type:r="line",height:n=300,isLoading:o=!1,options:d={}}=e,[c,u]=(0,s.useState)({}),[b,g]=(0,s.useState)(2);return(0,s.useEffect)(()=>{let e=()=>{var e,t,a,s,n;let l;let o=window.innerWidth;g(l=o<640?1.25:o<1024?1.75:2),u({...i,...d,responsive:!0,maintainAspectRatio:!0,aspectRatio:l,plugins:{...i.plugins,...d.plugins,legend:{...null===(e=i.plugins)||void 0===e?void 0:e.legend,...null===(t=d.plugins)||void 0===t?void 0:t.legend,display:"pie"===r||"doughnut"===r||o>640}},scales:{...i.scales,...d.scales,x:{...i.scales.x,...null===(a=d.scales)||void 0===a?void 0:a.x,ticks:{...i.scales.x.ticks,...null===(n=d.scales)||void 0===n?void 0:null===(s=n.x)||void 0===s?void 0:s.ticks,maxRotation:o<640?90:45,autoSkip:!0,maxTicksLimit:o<640?6:12}}}})};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[d,r]),(0,a.jsx)("div",{className:"relative w-full",style:{height:"".concat(n,"px")},children:o?(0,a.jsx)("div",{className:"h-full w-full flex items-center justify-center",children:(0,a.jsx)("div",{className:"h-12 w-12 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"})}):t.labels&&t.labels.length>0?(()=>{switch(r){case"line":default:return(0,a.jsx)(l.Line,{data:t,options:c});case"bar":return(0,a.jsx)(l.Bar,{data:t,options:c});case"pie":return(0,a.jsx)(l.Pie,{data:t,options:c});case"doughnut":return(0,a.jsx)(l.Doughnut,{data:t,options:c})}})():(0,a.jsx)("div",{className:"h-full w-full flex items-center justify-center text-gray-400 text-center p-4",children:"No data available for the selected period"})})}},6495:function(e,t,r){r.r(t),r.d(t,{Bar:function(){return m},Bubble:function(){return f},Chart:function(){return u},Doughnut:function(){return h},Line:function(){return g},Pie:function(){return v},PolarArea:function(){return p},Radar:function(){return x},Scatter:function(){return j},getDatasetAtEvent:function(){return o},getElementAtEvent:function(){return d},getElementsAtEvent:function(){return c}});var a=r(7294),s=r(3148);let n="label";function l(e,t){"function"==typeof e?e(t):e&&(e.current=t)}function i(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n,a=[];e.datasets=t.map(t=>{let s=e.datasets.find(e=>e[r]===t[r]);return!s||!t.data||a.includes(s)?{...t}:(a.push(s),Object.assign(s,t),s)})}function o(e,t){return e.getElementsAtEventForMode(t.nativeEvent,"dataset",{intersect:!0},!1)}function d(e,t){return e.getElementsAtEventForMode(t.nativeEvent,"nearest",{intersect:!0},!1)}function c(e,t){return e.getElementsAtEventForMode(t.nativeEvent,"index",{intersect:!0},!1)}let u=(0,a.forwardRef)(function(e,t){let{height:r=150,width:o=300,redraw:d=!1,datasetIdKey:c,type:u,data:b,options:g,plugins:m=[],fallbackContent:x,updateMode:h,...p}=e,f=(0,a.useRef)(null),v=(0,a.useRef)(null),j=()=>{f.current&&(v.current=new s.kL(f.current,{type:u,data:function(e){var t;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n,a={labels:[],datasets:[]};return t=e.labels,a.labels=t,i(a,e.datasets,r),a}(b,c),options:g&&{...g},plugins:m}),l(t,v.current))},y=()=>{l(t,null),v.current&&(v.current.destroy(),v.current=null)};return(0,a.useEffect)(()=>{!d&&v.current&&g&&function(e,t){let r=e.options;r&&t&&Object.assign(r,t)}(v.current,g)},[d,g]),(0,a.useEffect)(()=>{if(!d&&v.current){var e,t;e=v.current.config.data,t=b.labels,e.labels=t}},[d,b.labels]),(0,a.useEffect)(()=>{!d&&v.current&&b.datasets&&i(v.current.config.data,b.datasets,c)},[d,b.datasets]),(0,a.useEffect)(()=>{v.current&&(d?(y(),setTimeout(j)):v.current.update(h))},[d,g,b.labels,b.datasets,h]),(0,a.useEffect)(()=>{v.current&&(y(),setTimeout(j))},[u]),(0,a.useEffect)(()=>(j(),()=>y()),[]),a.createElement("canvas",{ref:f,role:"img",height:r,width:o,...p},x)});function b(e,t){return s.kL.register(t),(0,a.forwardRef)((t,r)=>a.createElement(u,{...t,ref:r,type:e}))}let g=b("line",s.ST),m=b("bar",s.vn),x=b("radar",s.Xi),h=b("doughnut",s.jI),p=b("polarArea",s.CV),f=b("bubble",s.N0),v=b("pie",s.tt),j=b("scatter",s.ho)}}]);