"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[583,495],{9583:function(e,t,r){r.r(t),r.d(t,{default:function(){return g}});var s=r(5893),a=r(7294),n=r(9558);let o=e=>e?"".concat((e/1e3).toFixed(2)," km"):"0 km",l=e=>{if(!e)return"0 min";let t=Math.floor(e/3600),r=Math.floor(e%3600/60);return t>0?"".concat(t,"h ").concat(r,"min"):"".concat(r," min")},i=e=>{switch(null==e?void 0:e.toLowerCase()){case"running":return(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})});case"cycling":case"indoor_cycling":return(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})});case"swimming":return(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M9 19l3 3m0 0l3-3m-3 3V10"})});default:return(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}};function d(e){let{activityType:t,title:r,date:a,distance:n,duration:d,calories:c,heartRate:u,isLoading:m}=e;if(m)return(0,s.jsxs)("div",{className:"bg-gray-800 bg-opacity-60 rounded-lg border border-blue-500/20 p-4 backdrop-blur-sm animate-pulse",children:[(0,s.jsx)("div",{className:"h-5 w-24 bg-gray-700 rounded mb-2"}),(0,s.jsx)("div",{className:"h-6 w-32 bg-gray-700 rounded mb-4"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,s.jsx)("div",{className:"h-5 w-16 bg-gray-700 rounded"}),(0,s.jsx)("div",{className:"h-5 w-16 bg-gray-700 rounded"}),(0,s.jsx)("div",{className:"h-5 w-16 bg-gray-700 rounded"}),(0,s.jsx)("div",{className:"h-5 w-16 bg-gray-700 rounded"})]})]});let g=a?new Date(a).toLocaleDateString():"Unknown date";return(0,s.jsxs)("div",{className:"bg-gray-800 bg-opacity-60 rounded-lg border border-blue-500/20 p-4 backdrop-blur-sm transition-all duration-300 hover:shadow-lg hover:shadow-blue-500/10 hover:scale-[1.02]",children:[(0,s.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-gray-400 text-sm",children:g}),(0,s.jsx)("h3",{className:"text-white font-medium",children:r||"".concat(t," workout")})]}),(0,s.jsx)("div",{className:"p-2 rounded-full bg-blue-500/20 text-blue-400",children:i(t)})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-x-4 gap-y-2 mt-4 text-sm",children:[n&&(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1 text-blue-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})}),(0,s.jsx)("span",{className:"text-gray-300",children:o(n)})]}),d&&(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1 text-purple-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,s.jsx)("span",{className:"text-gray-300",children:l(d)})]}),c&&(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1 text-amber-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 18.657A8 8 0 016.343 7.343S7 9 9 10c0-2 .5-5 2.986-7C14 5 16.09 5.777 17.656 7.343A7.975 7.975 0 0120 13a7.975 7.975 0 01-2.343 5.657z"}),(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.879 16.121A3 3 0 1012.015 11L11 14H9c0 .768.293 1.536.879 2.121z"})]}),(0,s.jsxs)("span",{className:"text-gray-300",children:[c," kcal"]})]}),u&&(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1 text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),(0,s.jsxs)("span",{className:"text-gray-300",children:[u," bpm"]})]})]})]})}function c(e){let{label:t,placeholder:r,unit:n,onSubmit:o}=e,[l,i]=(0,a.useState)(""),[d,c]=(0,a.useState)(!1),[u,m]=(0,a.useState)(!1),g=async e=>{if(e.preventDefault(),!(!l||isNaN(l)||0>=parseFloat(l))){c(!0);try{await o(parseFloat(l))&&(i(""),m(!0),setTimeout(()=>m(!1),3e3))}catch(e){console.error("Error submitting value:",e)}finally{c(!1)}}};return(0,s.jsx)("div",{children:(0,s.jsxs)("form",{onSubmit:g,className:"flex items-center space-x-2",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{type:"text",value:l,onChange:e=>i(e.target.value),placeholder:r,className:"pl-3 pr-10 py-2 bg-gray-800 border border-blue-500/30 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500 text-white w-32",disabled:d}),n&&(0,s.jsx)("span",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 text-sm",children:n})]}),(0,s.jsx)("button",{type:"submit",disabled:d||!l,className:"px-4 py-2 rounded-md text-white ".concat(d||!l?"bg-gray-700 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"," transition-colors duration-200"),children:d?(0,s.jsxs)("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):u?(0,s.jsx)("svg",{className:"h-5 w-5 text-green-500",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}):"Add"}),(0,s.jsx)("span",{className:"text-sm text-gray-400",children:t})]})})}let u={map:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})}),flame:(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 18.657A8 8 0 016.343 7.343S7 9 9 10c0-2 .5-5 2.986-7C14 5 16.09 5.777 17.656 7.343A7.975 7.975 0 0120 13a7.975 7.975 0 01-2.343 5.657z"}),(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.879 16.121A3 3 0 1012.015 11L11 14H9c0 .768.293 1.536.879 2.121z"})]}),clock:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),heart:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})})};function m(e){let{stats:t,isLoading:r}=e;return r?(0,s.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 md:gap-4",children:[,,,,].fill(0).map((e,t)=>(0,s.jsxs)("div",{className:"bg-gray-800 bg-opacity-60 rounded-lg border border-blue-500/20 p-3 md:p-4 backdrop-blur-sm animate-pulse",children:[(0,s.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,s.jsx)("div",{className:"h-4 w-24 bg-gray-700 rounded"}),(0,s.jsx)("div",{className:"h-8 w-8 bg-gray-700 rounded-full"})]}),(0,s.jsx)("div",{className:"h-8 w-20 bg-gray-700 rounded mt-4"})]},t))}):(0,s.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 md:gap-4",children:t.map((e,t)=>(0,s.jsxs)("div",{className:"bg-gray-800 bg-opacity-60 rounded-lg border border-blue-500/20 p-3 md:p-4 backdrop-blur-sm transition-all duration-300 hover:shadow-lg hover:shadow-blue-500/10 hover:scale-[1.02]",children:[(0,s.jsxs)("div",{className:"flex justify-between items-start",children:[(0,s.jsx)("h3",{className:"text-sm font-medium text-gray-400",children:e.title}),(0,s.jsx)("div",{className:"p-2 rounded-full bg-blue-500/20 text-blue-400",children:u[e.icon]||(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})})]}),(0,s.jsxs)("div",{className:"mt-4 flex items-baseline",children:[(0,s.jsx)("span",{className:"text-2xl font-semibold text-white",children:"number"==typeof e.value?e.value.toLocaleString():e.value}),e.unit&&(0,s.jsx)("span",{className:"ml-1 text-sm text-gray-400",children:e.unit})]})]},t))})}function g(e){let{supabase:t,dateRange:r}=e,[o,l]=(0,a.useState)([]),[i,u]=(0,a.useState)([]),[g,h]=(0,a.useState)(!0),[x,p]=(0,a.useState)({totalDistance:0,totalCalories:0,totalTime:0,avgHeartRate:0}),v=e=>e.toISOString().split("T")[0];(0,a.useEffect)(()=>{!async function(){h(!0);try{let e=v(r.startDate),t=v(r.endDate),s=await fetch("/api/workouts?start_date=".concat(e,"&end_date=").concat(t)),a=await s.json(),n=await fetch("/api/vo2max?start_date=".concat(e,"&end_date=").concat(t)),o=await n.json();if(a.data){l(a.data);let e=a.data.reduce((e,t)=>e+(t.distance||0),0),t=a.data.reduce((e,t)=>e+(t.calories||0),0),r=a.data.reduce((e,t)=>e+(t.time||0),0),s=a.data.filter(e=>e.avg_hr),n=s.length?s.reduce((e,t)=>e+t.avg_hr,0)/s.length:0;p({totalDistance:parseFloat((e/1e3).toFixed(1)),totalCalories:t,totalTime:Math.round(r/60),avgHeartRate:Math.round(n)})}o.history&&u(o.history)}catch(e){console.error("Error fetching fitness data:",e)}finally{h(!1)}}()},[t,r]);let b={labels:i.map(e=>e.test_date),datasets:[{label:"VO₂ Max",data:i.map(e=>e.vo2max_value),borderColor:"rgba(139, 92, 246, 0.8)",backgroundColor:"rgba(139, 92, 246, 0.2)",tension:.3,fill:!0}]},f=o.reduce((e,t)=>{let r=t.activity_type||"unknown";return e[r]=(e[r]||0)+1,e},{}),w={labels:Object.keys(f),datasets:[{data:Object.values(f),backgroundColor:["rgba(59, 130, 246, 0.8)","rgba(16, 185, 129, 0.8)","rgba(239, 68, 68, 0.8)","rgba(245, 158, 11, 0.8)","rgba(139, 92, 246, 0.8)"],borderWidth:0}]},j=async e=>{try{let t=new Date().toISOString().split("T")[0],s=await fetch("/api/vo2max",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({test_date:t,vo2max_value:parseFloat(e)})}),a=await s.json();if(!a.success)throw Error(a.error||"Failed to save VO2 Max value");let n=await fetch("/api/vo2max?start_date=".concat(v(r.startDate),"&end_date=").concat(v(r.endDate))),o=await n.json();return o.history&&u(o.history),!0}catch(e){return console.error("Error saving VO2 Max:",e),!1}};return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center",children:[(0,s.jsx)("h2",{className:"text-2xl font-orbitron text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-purple-500",children:"Fitness Tracker"}),(0,s.jsx)(c,{label:"Add VO₂ Max Reading",placeholder:"e.g. 42.5",unit:"ml/kg/min",onSubmit:j})]}),(0,s.jsx)(m,{stats:[{title:"Total Distance",value:x.totalDistance,unit:"km",icon:"map"},{title:"Total Calories",value:x.totalCalories,unit:"kcal",icon:"flame"},{title:"Active Time",value:x.totalTime,unit:"min",icon:"clock"},{title:"Avg Heart Rate",value:x.avgHeartRate,unit:"bpm",icon:"heart"}],isLoading:g}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,s.jsxs)("div",{className:"lg:col-span-2 bg-gray-800 bg-opacity-60 rounded-lg border border-blue-500/20 p-4 backdrop-blur-sm",children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-blue-300 mb-4",children:"VO₂ Max Trend"}),(0,s.jsx)(n.Z,{data:b,type:"line",height:300,isLoading:g||0===i.length,options:{scales:{y:{min:Math.max(0,Math.min(...i.map(e=>e.vo2max_value||0))-5),max:Math.max(...i.map(e=>e.vo2max_value||0))+5}}}})]}),(0,s.jsxs)("div",{className:"bg-gray-800 bg-opacity-60 rounded-lg border border-blue-500/20 p-4 backdrop-blur-sm",children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-blue-300 mb-4",children:"Activity Types"}),(0,s.jsx)(n.Z,{data:w,type:"doughnut",height:250,isLoading:g||0===o.length,options:{plugins:{legend:{position:"bottom"}}}})]})]}),(0,s.jsxs)("div",{className:"bg-gray-800 bg-opacity-60 rounded-lg border border-blue-500/20 p-4 backdrop-blur-sm",children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-blue-300 mb-4",children:"Recent Workouts"}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:g?[,,,].fill(0).map((e,t)=>(0,s.jsx)(d,{isLoading:!0},t)):o.length>0?o.slice(0,6).map((e,t)=>(0,s.jsx)(d,{activityType:e.activity_type,title:e.title,date:e.date,distance:e.distance,duration:e.time,calories:e.calories,heartRate:e.avg_hr},t)):(0,s.jsx)("div",{className:"col-span-3 py-8 text-center text-gray-400",children:"No workouts found in the selected date range."})})]})]})}},9558:function(e,t,r){r.d(t,{Z:function(){return i}});var s=r(5893),a=r(7294),n=r(3148),o=r(6495);n.kL.register(n.uw,n.f$,n.od,n.jn,n.ZL,n.qi,n.Dx,n.u,n.De,n.Gu);let l={responsive:!0,maintainAspectRatio:!0,plugins:{legend:{position:"top",labels:{color:"#D1D5DB",boxWidth:12,padding:10,font:{size:11}}},tooltip:{backgroundColor:"rgba(17, 24, 39, 0.8)",titleColor:"#F9FAFB",bodyColor:"#F3F4F6",borderColor:"rgba(59, 130, 246, 0.5)",borderWidth:1,padding:10,cornerRadius:6,displayColors:!0,usePointStyle:!0,boxPadding:3}},scales:{x:{grid:{color:"rgba(31, 41, 55, 0.2)",borderColor:"rgba(31, 41, 55, 0.5)"},ticks:{color:"#9CA3AF",maxRotation:45,minRotation:0,font:{size:10}}},y:{grid:{color:"rgba(31, 41, 55, 0.2)",borderColor:"rgba(31, 41, 55, 0.5)"},ticks:{color:"#9CA3AF",font:{size:10}}}},elements:{line:{tension:.3,borderWidth:2},point:{radius:3,hoverRadius:5,borderWidth:2,backgroundColor:"#1F2937"},bar:{borderRadius:4},arc:{borderWidth:1,borderColor:"#1F2937"}}};function i(e){let{data:t,type:r="line",height:n=300,isLoading:i=!1,options:d={}}=e,[c,u]=(0,a.useState)({}),[m,g]=(0,a.useState)(2);return(0,a.useEffect)(()=>{let e=()=>{var e,t,s,a,n;let o;let i=window.innerWidth;g(o=i<640?1.25:i<1024?1.75:2),u({...l,...d,responsive:!0,maintainAspectRatio:!0,aspectRatio:o,plugins:{...l.plugins,...d.plugins,legend:{...null===(e=l.plugins)||void 0===e?void 0:e.legend,...null===(t=d.plugins)||void 0===t?void 0:t.legend,display:"pie"===r||"doughnut"===r||i>640}},scales:{...l.scales,...d.scales,x:{...l.scales.x,...null===(s=d.scales)||void 0===s?void 0:s.x,ticks:{...l.scales.x.ticks,...null===(n=d.scales)||void 0===n?void 0:null===(a=n.x)||void 0===a?void 0:a.ticks,maxRotation:i<640?90:45,autoSkip:!0,maxTicksLimit:i<640?6:12}}}})};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[d,r]),(0,s.jsx)("div",{className:"relative w-full",style:{height:"".concat(n,"px")},children:i?(0,s.jsx)("div",{className:"h-full w-full flex items-center justify-center",children:(0,s.jsx)("div",{className:"h-12 w-12 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"})}):t.labels&&t.labels.length>0?(()=>{switch(r){case"line":default:return(0,s.jsx)(o.Line,{data:t,options:c});case"bar":return(0,s.jsx)(o.Bar,{data:t,options:c});case"pie":return(0,s.jsx)(o.Pie,{data:t,options:c});case"doughnut":return(0,s.jsx)(o.Doughnut,{data:t,options:c})}})():(0,s.jsx)("div",{className:"h-full w-full flex items-center justify-center text-gray-400 text-center p-4",children:"No data available for the selected period"})})}},6495:function(e,t,r){r.r(t),r.d(t,{Bar:function(){return h},Bubble:function(){return b},Chart:function(){return u},Doughnut:function(){return p},Line:function(){return g},Pie:function(){return f},PolarArea:function(){return v},Radar:function(){return x},Scatter:function(){return w},getDatasetAtEvent:function(){return i},getElementAtEvent:function(){return d},getElementsAtEvent:function(){return c}});var s=r(7294),a=r(3148);let n="label";function o(e,t){"function"==typeof e?e(t):e&&(e.current=t)}function l(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n,s=[];e.datasets=t.map(t=>{let a=e.datasets.find(e=>e[r]===t[r]);return!a||!t.data||s.includes(a)?{...t}:(s.push(a),Object.assign(a,t),a)})}function i(e,t){return e.getElementsAtEventForMode(t.nativeEvent,"dataset",{intersect:!0},!1)}function d(e,t){return e.getElementsAtEventForMode(t.nativeEvent,"nearest",{intersect:!0},!1)}function c(e,t){return e.getElementsAtEventForMode(t.nativeEvent,"index",{intersect:!0},!1)}let u=(0,s.forwardRef)(function(e,t){let{height:r=150,width:i=300,redraw:d=!1,datasetIdKey:c,type:u,data:m,options:g,plugins:h=[],fallbackContent:x,updateMode:p,...v}=e,b=(0,s.useRef)(null),f=(0,s.useRef)(null),w=()=>{b.current&&(f.current=new a.kL(b.current,{type:u,data:function(e){var t;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n,s={labels:[],datasets:[]};return t=e.labels,s.labels=t,l(s,e.datasets,r),s}(m,c),options:g&&{...g},plugins:h}),o(t,f.current))},j=()=>{o(t,null),f.current&&(f.current.destroy(),f.current=null)};return(0,s.useEffect)(()=>{!d&&f.current&&g&&function(e,t){let r=e.options;r&&t&&Object.assign(r,t)}(f.current,g)},[d,g]),(0,s.useEffect)(()=>{if(!d&&f.current){var e,t;e=f.current.config.data,t=m.labels,e.labels=t}},[d,m.labels]),(0,s.useEffect)(()=>{!d&&f.current&&m.datasets&&l(f.current.config.data,m.datasets,c)},[d,m.datasets]),(0,s.useEffect)(()=>{f.current&&(d?(j(),setTimeout(w)):f.current.update(p))},[d,g,m.labels,m.datasets,p]),(0,s.useEffect)(()=>{f.current&&(j(),setTimeout(w))},[u]),(0,s.useEffect)(()=>(w(),()=>j()),[]),s.createElement("canvas",{ref:b,role:"img",height:r,width:i,...v},x)});function m(e,t){return a.kL.register(t),(0,s.forwardRef)((t,r)=>s.createElement(u,{...t,ref:r,type:e}))}let g=m("line",a.ST),h=m("bar",a.vn),x=m("radar",a.Xi),p=m("doughnut",a.jI),v=m("polarArea",a.CV),b=m("bubble",a.N0),f=m("pie",a.tt),w=m("scatter",a.ho)}}]);