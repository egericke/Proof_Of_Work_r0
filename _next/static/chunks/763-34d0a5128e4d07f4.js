"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[763],{8444:function(e,t,a){a.d(t,{Z:function(){return o}});var s=a(5893),r=a(7294);let l=[{label:"Last 7 Days",days:7},{label:"Last 30 Days",days:30},{label:"Last 90 Days",days:90},{label:"Year to Date",custom:!0}];function n(e){let{dateRange:t,setDateRange:a,onClose:n}=e,[o,i]=(0,r.useState)(t.startDate.toISOString().split("T")[0]),[c,d]=(0,r.useState)(t.endDate.toISOString().split("T")[0]),[m,x]=(0,r.useState)(null);(0,r.useEffect)(()=>{new Date(c)<new Date(o)&&d(o)},[o,c]);let u=e=>{let t;x(e.label);let a=new Date;a.setHours(23,59,59,999),e.custom&&"Year to Date"===e.label?t=new Date(a.getFullYear(),0,1):((t=new Date).setDate(a.getDate()-e.days),t.setHours(0,0,0,0)),i(t.toISOString().split("T")[0]),d(a.toISOString().split("T")[0])};return(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("h3",{className:"text-sm font-medium text-white",children:"Select Date Range"}),(0,s.jsx)("button",{onClick:n,className:"text-gray-400 hover:text-white p-1","aria-label":"Close date picker",children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),(0,s.jsx)("div",{className:"grid grid-cols-2 gap-2",children:l.map(e=>(0,s.jsx)("button",{onClick:()=>u(e),className:"px-3 py-2 text-sm font-medium rounded-md transition-all duration-300 ".concat(m===e.label?"bg-blue-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"),children:e.label},e.label))}),(0,s.jsxs)("div",{className:"border-t border-gray-700 my-3 pt-3",children:[(0,s.jsx)("span",{className:"text-xs text-gray-400 mb-2 block",children:"Or select custom range:"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-gray-400 mb-1",children:"Start Date"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{type:"date",value:o,onChange:e=>{i(e.target.value),x(null)},className:"w-full pl-2 pr-8 py-2 bg-gray-700 rounded border border-gray-600 text-white text-sm focus:ring-1 focus:ring-blue-500 focus:border-blue-500 focus:outline-none"}),(0,s.jsx)("div",{className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-400 pointer-events-none",children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-gray-400 mb-1",children:"End Date"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{type:"date",value:c,min:o,onChange:e=>{d(e.target.value),x(null)},className:"w-full pl-2 pr-8 py-2 bg-gray-700 rounded border border-gray-600 text-white text-sm focus:ring-1 focus:ring-blue-500 focus:border-blue-500 focus:outline-none"}),(0,s.jsx)("div",{className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-400 pointer-events-none",children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})})]})]})]})]}),o&&c&&(0,s.jsxs)("div",{className:"bg-gray-700/50 p-2 rounded text-center text-sm",children:[(0,s.jsxs)("span",{className:"text-gray-300",children:[new Date(o).toLocaleDateString()," - ",new Date(c).toLocaleDateString()]}),(0,s.jsxs)("div",{className:"text-xs text-blue-300 mt-1",children:[Math.round((new Date(c)-new Date(o))/864e5+1)," days"]})]}),(0,s.jsx)("div",{className:"flex justify-end",children:(0,s.jsx)("button",{onClick:()=>{a({startDate:new Date(o),endDate:new Date(c)}),n()},className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded text-sm font-medium transition-colors",children:"Apply Range"})})]})}function o(e){let{userData:t,dateRange:a,setDateRange:l,toggleSidebar:o}=e,[i,c]=(0,r.useState)(!1),d=new Date().toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"});return(0,s.jsx)("header",{className:"bg-gray-800 border-b border-blue-500/30 sticky top-0 z-20",children:(0,s.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,s.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("button",{onClick:o,className:"mr-3 md:hidden p-2 rounded-md text-gray-400 hover:text-white hover:bg-gray-700 focus:outline-none","aria-label":"Toggle sidebar menu",children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),(0,s.jsx)("div",{className:"flex-shrink-0",children:(0,s.jsx)("h1",{className:"text-xl sm:text-2xl font-orbitron text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-purple-500",children:"MY DAILY PROOF"})})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2 sm:space-x-4",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("button",{onClick:()=>c(!i),className:"px-2 sm:px-3 py-2 text-sm font-medium rounded-md bg-blue-500/20 hover:bg-blue-500/30 border border-blue-400/30 transition-all duration-300 flex items-center space-x-1 sm:space-x-2",children:[(0,s.jsxs)("span",{className:"hidden xs:inline",children:[a.startDate.toLocaleDateString()," - ",a.endDate.toLocaleDateString()]}),(0,s.jsx)("span",{className:"xs:hidden",children:"Date"}),(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),i&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 md:bg-transparent md:inset-auto md:absolute md:right-0 md:mt-2 md:w-72",children:(0,s.jsx)("div",{className:"absolute right-4 top-20 w-72 md:right-0 md:top-0 md:w-72 md:static bg-gray-800 rounded-md shadow-lg p-4 border border-blue-500/30",children:(0,s.jsx)(n,{dateRange:a,setDateRange:l,onClose:()=>c(!1)})})})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsxs)("div",{className:"text-right hidden sm:block",children:[(0,s.jsx)("div",{className:"text-sm font-medium text-blue-300",children:t.name}),(0,s.jsx)("div",{className:"text-xs text-gray-400",children:d})]}),(0,s.jsx)("img",{className:"h-8 w-8 sm:h-10 sm:w-10 rounded-full border-2 border-blue-500/50",src:t.avatar,alt:t.name})]})]})]})})})}},36:function(e,t,a){a.d(t,{Z:function(){return h}});var s=a(5893),r=a(7294);a(9985);var l=a(684),n=a(5842),o=a(8487),i=a(6495);let c=(e,t)=>{let a=[],s=new Date(e);s.setUTCHours(0,0,0,0);let r=new Date(t);for(r.setUTCHours(0,0,0,0),r.setDate(r.getDate()+1);s<r;)a.push(s.toISOString().split("T")[0]),s.setUTCDate(s.getUTCDate()+1);return a},d={Meditation:{border:"rgba(59, 130, 246, 1)",secondary:"rgba(59, 130, 246, 0.2)"},Exercise:{border:"rgba(16, 185, 129, 1)",secondary:"rgba(16, 185, 129, 0.2)"},Reading:{border:"rgba(139, 92, 246, 1)",secondary:"rgba(139, 92, 246, 0.2)"},Journaling:{border:"rgba(245, 158, 11, 1)",secondary:"rgba(245, 158, 11, 0.2)"},"Cold Plunge":{border:"rgba(14, 165, 233, 1)",secondary:"rgba(14, 165, 233, 0.2)"},default:{border:"rgba(156, 163, 175, 1)",secondary:"rgba(156, 163, 175, 0.2)"}};function m(e){let{habitName:t,habitData:a}=e,[l,n]=(0,r.useState)({currentStreak:0,bestStreak:0,completionRate:0,totalCompleted:0,totalAttemptedDays:0}),[o,m]=(0,r.useState)({labels:[],datasets:[]}),x=d[t]||d.default;return(0,r.useEffect)(()=>{if(!a||!a.entries||0===a.entries.length){n({currentStreak:0,bestStreak:0,completionRate:0,totalCompleted:0,totalAttemptedDays:0}),m({labels:[],datasets:[]});return}let e=[...a.entries].sort((e,t)=>new Date(e.date)-new Date(t.date)),t={};e.forEach(e=>{t[e.date]=e.completed});let s=e[0].date,r=e[e.length-1].date,l=new Date(s);l.setUTCHours(0,0,0,0);let o=new Date(r),i=new Date;i.setUTCHours(0,0,0,0),o<i&&(o=new Date(i)),o.setUTCHours(0,0,0,0);let d=c(l,o),u=d.length>0?d.length:1,g=0,h=new Date;for(h.setUTCHours(0,0,0,0);;){let e=h.toISOString().split("T")[0];if(h<l)break;if(!0===t[e])g++,h.setUTCDate(h.getUTCDate()-1);else break}let b=0,p=0;d.forEach(e=>{!0===t[e]?p++:(b=Math.max(b,p),p=0)}),b=Math.max(b,p);let j=e.filter(e=>e.completed).length;n({currentStreak:g,bestStreak:b,completionRate:u>0?Math.round(j/u*100):0,totalCompleted:j,totalAttemptedDays:u});let f=[],v=[];if(d.length>=7){let e=d.map(e=>!0===t[e]?1:0);for(let t=6;t<d.length;t++){let a=e.slice(t-7+1,t+1).reduce((e,t)=>e+t,0)/7*100;f.push(d[t]),v.push(a)}}m({labels:f,datasets:[{label:"7-Day Completion Rate (%)",data:v,borderColor:x.border,backgroundColor:x.secondary,tension:.3,fill:!0}]})},[a,t]),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[(0,s.jsxs)("div",{className:"bg-gray-700/50 p-3 rounded",children:[(0,s.jsx)("p",{className:"text-xs text-gray-400",children:"Current Streak"}),(0,s.jsxs)("p",{className:"text-xl font-bold",children:[l.currentStreak," ",(0,s.jsx)("span",{className:"text-xs",children:"days"})]})]}),(0,s.jsxs)("div",{className:"bg-gray-700/50 p-3 rounded",children:[(0,s.jsx)("p",{className:"text-xs text-gray-400",children:"Best Streak"}),(0,s.jsxs)("p",{className:"text-xl font-bold",children:[l.bestStreak," ",(0,s.jsx)("span",{className:"text-xs",children:"days"})]})]}),(0,s.jsxs)("div",{className:"bg-gray-700/50 p-3 rounded",children:[(0,s.jsx)("p",{className:"text-xs text-gray-400",children:"Completion Rate"}),(0,s.jsxs)("p",{className:"text-xl font-bold",children:[l.completionRate,"%"]})]}),(0,s.jsxs)("div",{className:"bg-gray-700/50 p-3 rounded",children:[(0,s.jsx)("p",{className:"text-xs text-gray-400",children:"Total Completed"}),(0,s.jsxs)("p",{className:"text-xl font-bold",children:[l.totalCompleted," / ",l.totalAttemptedDays,(0,s.jsx)("span",{className:"text-xs ml-1",children:"days"})]})]})]}),(0,s.jsxs)("div",{className:"bg-gray-700/50 p-3 rounded",children:[(0,s.jsx)("h4",{className:"text-sm font-medium text-gray-300 mb-2",children:"Consistency Trend (7-Day Avg)"}),(0,s.jsx)("div",{className:"h-48",children:o.labels.length>0?(0,s.jsx)(i.Line,{data:o,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{callbacks:{label:function(e){return"Completion rate: ".concat(e.parsed.y.toFixed(1),"%")}}}},scales:{y:{min:0,max:100,ticks:{color:"#9ca3af"},grid:{color:"rgba(255, 255, 255, 0.1)"}},x:{ticks:{color:"#9ca3af",autoSkip:!0,maxTicksLimit:10,maxRotation:45,minRotation:0},grid:{color:"rgba(255, 255, 255, 0.1)"}}}}}):(0,s.jsx)("div",{className:"flex items-center justify-center h-full text-gray-400",children:"Not enough data for trend (need >7 days)."})})]})]})}let x={completed:"bg-blue-500",incomplete:"bg-gray-600",noData:"bg-gray-800",todayRing:"ring-2 ring-white"},u=e=>({currentStreak:{title:"Current Streak",unit:"Days",color:"blue",icon:"flame"},bestStreak:{title:"Best Streak",unit:"Days",color:"amber",icon:"trophy"},doneInMonth:{title:"Done in ".concat(new Date(e,new Date().getMonth()).toLocaleString("default",{month:"long"})),unit:"Days",color:"green",icon:"list-check"},overallRate:{title:"".concat(e," Rate"),unit:"%",color:"purple",icon:"percent"}});function g(e){let{dateRange:t}=e,[a,n]=(0,r.useState)(t.endDate.getFullYear()),[i,d]=(0,r.useState)({}),[g,h]=(0,r.useState)([]),[b,p]=(0,r.useState)({}),[j,f]=(0,r.useState)({currentStreak:0,bestStreak:0,doneInMonth:0,overallRate:0}),[v,y]=(0,r.useState)(null),[N,w]=(0,r.useState)(!0),[k,D]=(0,r.useState)(null),[S,C]=(0,r.useState)(u(a));(0,r.useEffect)(()=>{C(u(a))},[a]),(0,r.useEffect)(()=>{(async function(){w(!0),D(null),d({}),h([]),p({}),y(null),f({currentStreak:0,bestStreak:0,doneInMonth:0,overallRate:0});try{let e=(0,o.N)();if(!e)throw Error("Supabase client not available");let t="".concat(a,"-01-01"),s="".concat(a,"-12-31");console.log("HabitTracker: Fetching habits for ".concat(a," (").concat(t," to ").concat(s,")"));let{data:r,error:l}=await e.from("habit_tracking").select("habit_date, habit_name, completed").gte("habit_date",t).lte("habit_date",s).order("habit_date",{ascending:!0});if(l)throw l;if(console.log("HabitTracker: Fetched ".concat((null==r?void 0:r.length)||0," habit entries for ").concat(a,".")),!r||0===r.length){w(!1);return}h(r);let n={},i={};r.forEach(e=>{let t=e.habit_date,a=e.habit_name||"Unnamed Habit";n[t]||(n[t]={total:0,completed:0}),n[t].total++,e.completed&&n[t].completed++,i[a]||(i[a]={entries:[]}),i[a].entries.push({date:e.habit_date,completed:e.completed})}),p(i);let m={},x=0;Object.keys(n).forEach(e=>{let t=n[e],a=t.total>0&&t.completed/t.total>=.8;m[e]=a,a&&x++}),d(m);let u=new Date().getMonth(),g=r[0].habit_date,b=new Date(g);b.setUTCHours(0,0,0,0);let j=new Date;j.setUTCHours(0,0,0,0);let v=new Date(a,11,31);v.setUTCHours(0,0,0,0);let y=a===j.getFullYear()?j:v;b>y&&(y=new Date(b));let N=c(b,y),k=N.length,D=k>0?parseFloat((x/k*100).toFixed(1)):0,S=0,C=new Date;for(;;){let e=C.toISOString().split("T")[0];if(C<b)break;if(!0===m[e])S++,C.setDate(C.getDate()-1);else break}let I=0,L=0;N.forEach(e=>{!0===m[e]?L++:(I=Math.max(I,L),L=0)}),I=Math.max(I,L);let M=Object.keys(m).filter(e=>{let t=new Date(e);return t.getUTCFullYear()===a&&t.getUTCMonth()===u&&m[e]}).length;f({currentStreak:S,bestStreak:I,doneInMonth:M,overallRate:D})}catch(e){console.error("HabitTracker: Error fetching/processing habits:",e),D(e.message||"Failed to load habit data.")}finally{w(!1)}})()},[a]);let I=e=>{let t=S[e],a=j[e];return(0,s.jsx)("div",{className:"bg-gray-800 bg-opacity-60 rounded-lg border border-".concat(t.color,"-500/30 p-4 backdrop-blur-sm"),children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-gray-400 text-sm",children:t.title}),(0,s.jsxs)("p",{className:"text-2xl font-bold text-white",children:[a,t.unit&&(0,s.jsx)("span",{className:"text-sm text-gray-300 ml-1",children:t.unit})]})]}),(0,s.jsx)("div",{className:"p-2 rounded-full bg-".concat(t.color,"-500/20 text-").concat(t.color,"-400"),children:(0,s.jsx)(()=>(0,s.jsx)("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),{})})]})})},L=e=>{y(e)};return N?(0,s.jsxs)("div",{className:"animate-pulse space-y-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("div",{className:"h-8 w-48 bg-gray-700 rounded"}),(0,s.jsx)("div",{className:"h-8 w-32 bg-gray-700 rounded"})]}),(0,s.jsx)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[void 0,void 0,void 0,void 0].map((e,t)=>(0,s.jsx)("div",{className:"h-20 bg-gray-700 rounded"},t))}),(0,s.jsx)("div",{className:"h-8 w-full bg-gray-700 rounded"}),(0,s.jsx)("div",{className:"h-64 bg-gray-700 rounded"})]}):k?(0,s.jsxs)("div",{className:"text-red-400 p-4 bg-red-900 bg-opacity-30 rounded border border-red-500",children:[(0,s.jsx)("p",{className:"font-bold",children:"Error loading habits:"}),(0,s.jsx)("p",{className:"mb-2",children:k}),(0,s.jsx)("button",{onClick:()=>window.location.reload(),className:"px-3 py-1 bg-red-600 rounded text-white text-sm hover:bg-red-700",children:"Reload Page"})]}):(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center",children:[(0,s.jsx)("h2",{className:"text-2xl font-orbitron text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-purple-500 mb-2 md:mb-0",children:"Habit Status"}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("button",{onClick:()=>n(e=>e-1),"aria-label":"Previous year",className:"p-2 rounded-full hover:bg-gray-700 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500",children:(0,s.jsx)("svg",{className:"h-5 w-5 text-gray-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),(0,s.jsx)("select",{value:a,onChange:e=>n(parseInt(e.target.value)),className:"px-3 py-1 bg-gray-800 text-white rounded-md border border-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[void 0,void 0,void 0,void 0,void 0].map((e,t)=>{let a=new Date().getFullYear()-t;return(0,s.jsx)("option",{value:a,children:a},a)})}),(0,s.jsx)("button",{onClick:()=>n(e=>e+1),"aria-label":"Next year",className:"p-2 rounded-full hover:bg-gray-700 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500",children:(0,s.jsx)("svg",{className:"h-5 w-5 text-gray-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[I("currentStreak"),I("bestStreak"),I("doneInMonth"),I("overallRate")]}),(0,s.jsxs)("div",{className:"flex flex-wrap items-center justify-center gap-x-4 gap-y-1 bg-gray-800 bg-opacity-60 rounded-lg border border-blue-500/20 p-3 backdrop-blur-sm text-xs",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"w-3 h-3 ".concat(x.completed," rounded-sm mr-1.5")}),(0,s.jsxs)("span",{className:"text-gray-300",children:["Completed (≥",80,"%)"]})]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"w-3 h-3 ".concat(x.incomplete," rounded-sm mr-1.5")}),(0,s.jsx)("span",{className:"text-gray-300",children:"Incomplete"})]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"w-3 h-3 ".concat(x.noData," rounded-sm mr-1.5")}),(0,s.jsx)("span",{className:"text-gray-300",children:"No Data"})]})]}),(0,s.jsx)("div",{className:"bg-gray-800 bg-opacity-60 rounded-lg border border-blue-500/20 p-4 backdrop-blur-sm",children:(0,s.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-x-6 gap-y-2",children:0!==g.length||N?(()=>{let e=Array.from({length:12},(e,t)=>t),t=new Date().toISOString().split("T")[0];return e.map(e=>{let r=new Date(a,e,1),l=r.toLocaleString("default",{month:"long"}),n=new Date(a,e+1,0).getDate(),o=r.getDay();0===o?o=6:o-=1;let c=[];for(let t=0;t<o;t++)c.push((0,s.jsx)("div",{className:"w-4 h-4"},"pad-".concat(e,"-").concat(t)));for(let r=1;r<=n;r++){let l="".concat(a,"-").concat(String(e+1).padStart(2,"0"),"-").concat(String(r).padStart(2,"0")),n=!0===i[l],o=void 0!==i[l],d=l===t,m=x.noData,u="".concat(l,": No data recorded");o&&(n?(m=x.completed,u="".concat(l,": Completed (≥").concat(80,"%)")):(m=x.incomplete,u="".concat(l,": Incomplete (<").concat(80,"%)"))),c.push((0,s.jsx)("div",{"data-tooltip-id":"habit-day-tooltip","data-tooltip-content":u,className:"w-4 h-4 rounded-sm cursor-pointer transition-colors duration-150 hover:opacity-80 ".concat(m," ").concat(d?x.todayRing:"")},l))}return(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsxs)("h5",{className:"text-xs text-gray-400 mb-1",children:[l," ",a]}),(0,s.jsx)("div",{className:"grid grid-cols-7 gap-1",children:c})]},l)})})():(0,s.jsxs)("div",{className:"col-span-full text-center text-gray-400 py-10",children:["No habit data found for ",a,"."]})})}),(0,s.jsxs)("div",{className:"bg-gray-800 bg-opacity-60 rounded-lg border border-blue-500/20 p-4 backdrop-blur-sm",children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-blue-300 mb-4",children:"Habit Drilldown"}),0!==Object.keys(b).length||N?v?(0,s.jsxs)("div",{children:[(0,s.jsxs)("button",{onClick:()=>y(null),className:"mb-4 text-sm text-blue-400 hover:text-blue-300 flex items-center",children:[(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back to All Habits"]}),(0,s.jsx)(m,{habitName:v,habitData:b[v]},v)]}):(0,s.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:Object.keys(b).sort().map(e=>(0,s.jsx)("button",{onClick:()=>L(e),className:"bg-gray-700 p-3 rounded-lg text-left hover:bg-gray-600 transition-colors focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500",children:(0,s.jsx)("span",{className:"font-medium text-white",children:e})},e))}):(0,s.jsxs)("p",{className:"text-gray-400 text-center py-4",children:["No individual habits tracked for ",a,"."]})]}),(0,s.jsx)(l.u,{id:"habit-day-tooltip",place:"top",effect:"solid"})]})}function h(e){let{dateRange:t}=e;return(0,s.jsxs)("div",{className:"space-y-6",id:"habits-panel-container",children:[(0,s.jsx)(n.Z,{componentName:"HabitTracker",children:(0,s.jsx)(g,{dateRange:t})}),(0,s.jsx)(l.u,{id:"habit-tooltip"})]})}},8487:function(e,t,a){a.d(t,{N:function(){return r}});var s=a(8967);let r=()=>{let e="https://oxhtyvhbjowtybdhdxfa.supabase.co",t="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im94aHR5dmhiam93dHliZGhkeGZhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Mzk2NzIwMTAsImV4cCI6MjA1NTI0ODAxMH0.hbKqzjs1UWVfdiKUBdRBASNwyR9EGElJqGXzxojJ-u0";if(!e||!t)return console.error("Supabase credentials missing - check your environment variables"),null;try{return(0,s.eI)(e,t)}catch(e){return console.error("Error creating Supabase client:",e),null}}}}]);