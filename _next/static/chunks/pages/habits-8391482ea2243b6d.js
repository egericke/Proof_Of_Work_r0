(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[574],{7104:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/habits",function(){return t(3209)}])},3209:function(e,s,t){"use strict";t.r(s);var r=t(5893),a=t(7294),l=t(8487);s.default=()=>{let[e,s]=(0,a.useState)([]),[t,n]=(0,a.useState)({currentStreak:0,bestStreak:0,doneInMonth:0,totalDone:0,overallRate:0}),[i,d]=(0,a.useState)(!0),[o,c]=(0,a.useState)(null),[h,x]=(0,a.useState)(new Date().getFullYear());return((0,a.useEffect)(()=>{(async()=>{d(!0),c(null);try{let e=(0,l.N)();if(!e)throw Error("Supabase client not available");let t="".concat(h,"-01-01"),r="".concat(h,"-12-31"),{data:a,error:i}=await e.from("habit_tracking").select("*").gte("habit_date",t).lte("habit_date",r).order("habit_date",{ascending:!0});if(i)throw i;let d={},o=new Date().toISOString().split("T")[0],c=new Date().getMonth()+1;if(a&&a.length>0){a.forEach(e=>{let s=e.habit_date;d[s]||(d[s]={total:0,completed:0}),d[s].total++,e.completed&&d[s].completed++});let e={};Object.keys(d).forEach(s=>{let t=d[s];e[s]=t.completed/t.total>=.8});let s=0,t=new Date(o);for(let r=0;r<365;r++)if(e[t.toISOString().split("T")[0]])s++,t.setDate(t.getDate()-1);else break;let r=0,l=0,i=Object.keys(e).sort();for(let s=0;s<i.length;s++)e[i[s]]?(l++,r=Math.max(r,l)):l=0;let h=Object.keys(d).filter(s=>new Date(s).getMonth()+1===c&&e[s]).length,x=Object.keys(e).filter(s=>e[s]).length,m=Object.keys(d).length,u=m>0?(x/m*100).toFixed(1):0;n({currentStreak:s,bestStreak:r,doneInMonth:h,totalDone:x,overallRate:u})}s(a||[])}catch(e){console.error("Error fetching habits:",e),c(e.message)}finally{d(!1)}})()},[h]),i)?(0,r.jsxs)("div",{className:"animate-pulse space-y-4",children:[(0,r.jsx)("div",{className:"h-8 w-48 bg-gray-700 rounded"}),(0,r.jsx)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[void 0,void 0,void 0,void 0].map((e,s)=>(0,r.jsx)("div",{className:"h-20 bg-gray-700 rounded"},s))}),(0,r.jsx)("div",{className:"h-64 bg-gray-700 rounded"})]}):o?(0,r.jsxs)("div",{className:"text-red-400 p-4 bg-red-900 bg-opacity-30 rounded border border-red-500",children:[(0,r.jsx)("p",{className:"font-bold",children:"Error loading habits:"}),(0,r.jsx)("p",{children:o})]}):(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center",children:[(0,r.jsx)("h2",{className:"text-2xl font-orbitron text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-purple-500",children:"Yearly Status"}),(0,r.jsxs)("div",{className:"flex items-center space-x-2 mt-2 md:mt-0",children:[(0,r.jsx)("button",{onClick:()=>x(h-1),className:"p-2 rounded-full hover:bg-gray-700 focus:outline-none","aria-label":"Previous year",children:(0,r.jsx)("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),(0,r.jsx)("select",{value:h,onChange:e=>x(parseInt(e.target.value)),className:"px-3 py-1 bg-gray-800 rounded-md border border-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[void 0,void 0,void 0,void 0,void 0].map((e,s)=>{let t=new Date().getFullYear()-2+s;return(0,r.jsx)("option",{value:t,children:t},t)})}),(0,r.jsx)("button",{onClick:()=>x(h+1),className:"p-2 rounded-full hover:bg-gray-700 focus:outline-none","aria-label":"Next year",children:(0,r.jsx)("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,r.jsx)("div",{className:"bg-gray-800 bg-opacity-60 rounded-lg border border-blue-500/20 p-4 backdrop-blur-sm",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-gray-400 text-sm",children:"Current Streak"}),(0,r.jsxs)("p",{className:"text-2xl font-bold",children:[t.currentStreak," ",(0,r.jsx)("span",{className:"text-sm",children:"Days"})]})]}),(0,r.jsx)("div",{className:"p-2 rounded-full bg-blue-500/20 text-blue-400",children:(0,r.jsx)("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})})})]})}),(0,r.jsx)("div",{className:"bg-gray-800 bg-opacity-60 rounded-lg border border-blue-500/20 p-4 backdrop-blur-sm",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-gray-400 text-sm",children:"Best Streak"}),(0,r.jsxs)("p",{className:"text-2xl font-bold",children:[t.bestStreak," ",(0,r.jsx)("span",{className:"text-sm",children:"Days"})]})]}),(0,r.jsx)("div",{className:"p-2 rounded-full bg-amber-500/20 text-amber-400",children:(0,r.jsx)("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})})})]})}),(0,r.jsx)("div",{className:"bg-gray-800 bg-opacity-60 rounded-lg border border-blue-500/20 p-4 backdrop-blur-sm",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-gray-400 text-sm",children:"Done in March"}),(0,r.jsxs)("p",{className:"text-2xl font-bold",children:[t.doneInMonth," ",(0,r.jsx)("span",{className:"text-sm",children:"Days"})]})]}),(0,r.jsx)("div",{className:"p-2 rounded-full bg-green-500/20 text-green-400",children:(0,r.jsx)("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})})})]})}),(0,r.jsx)("div",{className:"bg-gray-800 bg-opacity-60 rounded-lg border border-blue-500/20 p-4 backdrop-blur-sm",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-gray-400 text-sm",children:"Overall Rate"}),(0,r.jsxs)("p",{className:"text-2xl font-bold",children:[t.overallRate," ",(0,r.jsx)("span",{className:"text-sm",children:"%"})]})]}),(0,r.jsx)("div",{className:"p-2 rounded-full bg-purple-500/20 text-purple-400",children:(0,r.jsxs)("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 3.055A9.001 9.001 0 1020.945 13H11V3.055z"}),(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.488 9H15V3.512A9.025 9.025 0 0120.488 9z"})]})})]})})]}),(0,r.jsxs)("div",{className:"flex flex-wrap items-center justify-center gap-4 bg-gray-800 bg-opacity-60 rounded-lg border border-blue-500/20 p-4 backdrop-blur-sm",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"w-4 h-4 bg-blue-500 rounded-sm mr-2"}),(0,r.jsx)("span",{className:"text-sm text-gray-300",children:"Completed"})]}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"w-4 h-4 bg-gray-600 rounded-sm mr-2"}),(0,r.jsx)("span",{className:"text-sm text-gray-300",children:"Incomplete"})]}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"w-4 h-4 bg-gray-800 rounded-sm mr-2"}),(0,r.jsx)("span",{className:"text-sm text-gray-300",children:"No Data"})]})]}),(0,r.jsx)("div",{className:"bg-gray-800 bg-opacity-60 rounded-lg border border-blue-500/20 p-4 backdrop-blur-sm",children:(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-x-8 gap-y-2",children:(()=>{let s={};e.forEach(e=>{let t=e.habit_date;s[t]||(s[t]={total:0,completed:0}),s[t].total++,e.completed&&s[t].completed++});let t=Object.keys(s).filter(e=>{let t=s[e];return t.completed/t.total>=.8});return["January","February","March","April","May","June","July","August","September","October","November","December"].map((e,a)=>{let l=new Date(h,a+1,0).getDate(),n=[];for(let e=1;e<=l;e++){let l="".concat(h,"-").concat(String(a+1).padStart(2,"0"),"-").concat(String(e).padStart(2,"0")),i=t.includes(l),d=l===new Date().toISOString().split("T")[0];n.push((0,r.jsx)("div",{className:"w-4 h-4 rounded-sm ".concat(i?"bg-blue-500":s[l]?"bg-gray-600":"bg-gray-800"," ").concat(d?"ring-2 ring-white":"","\n            hover:opacity-80 cursor-pointer transition-colors"),title:l},l))}return(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("h5",{className:"text-xs text-gray-400 mb-1",children:e}),(0,r.jsx)("div",{className:"grid grid-cols-7 gap-1",children:n})]},e)})})()})}),(0,r.jsxs)("div",{className:"bg-gray-800 bg-opacity-60 rounded-lg border border-blue-500/20 p-4 backdrop-blur-sm",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-blue-300 mb-4",children:"Recent Habits"}),0===e.length?(0,r.jsx)("div",{className:"text-center py-8 text-gray-400",children:(0,r.jsxs)("p",{children:["No habit data available for ",h]})}):(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.slice(0,6).map((e,s)=>(0,r.jsxs)("div",{className:"bg-gray-700 p-4 rounded-lg flex justify-between items-center",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-medium",children:e.habit_name}),(0,r.jsx)("p",{className:"text-gray-400 text-sm",children:new Date(e.habit_date).toLocaleDateString()})]}),(0,r.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center ".concat(e.completed?"bg-green-900 text-green-300":"bg-red-900 text-red-300"),children:e.completed?(0,r.jsx)("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}):(0,r.jsx)("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},s))})]})]})}},8487:function(e,s,t){"use strict";t.d(s,{N:function(){return a}});var r=t(8967);let a=()=>{let e="https://oxhtyvhbjowtybdhdxfa.supabase.co",s="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im94aHR5dmhiam93dHliZGhkeGZhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Mzk2NzIwMTAsImV4cCI6MjA1NTI0ODAxMH0.hbKqzjs1UWVfdiKUBdRBASNwyR9EGElJqGXzxojJ-u0";if(!e||!s)return console.error("Supabase credentials missing - check your environment variables"),null;try{return(0,r.eI)(e,s)}catch(e){return console.error("Error creating Supabase client:",e),null}}}},function(e){e.O(0,[967,888,774,179],function(){return e(e.s=7104)}),_N_E=e.O()}]);