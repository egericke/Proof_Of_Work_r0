(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5557:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return a(2794)}])},2794:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return b}});var s=a(5893),i=a(7294),l=a(6490);let n=(0,l.eI)("https://oxhtyvhbjowtybdhdxfa.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im94aHR5dmhiam93dHliZGhkeGZhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Mzk2NzIwMTAsImV4cCI6MjA1NTI0ODAxMH0.hbKqzjs1UWVfdiKUBdRBASNwyR9EGElJqGXzxojJ-u0");var c=()=>{let[e,t]=(0,i.useState)({});return(0,i.useEffect)(()=>{(async()=>{var e;let{data:a}=await n.from("vo2max_tests").select("vo2max_value").order("test_date",{ascending:!1}).limit(1),{data:s}=await n.from("workout_stats").select("id").gte("date",new Date(Date.now()-6048e5).toISOString()),{data:i}=await n.from("toggl_time").select("bucket, hours").gte("date",new Date(Date.now()-6048e5).toISOString()),{data:l}=await n.from("habit_analytics").select("consistency_score").gte("date",new Date(Date.now()-6048e5).toISOString());t({vo2Max:(null===(e=a[0])||void 0===e?void 0:e.vo2max_value)||"N/A",activitiesThisWeek:s.length,togglHours:i.reduce((e,t)=>e+t.hours,0),habitCompletion:l.length>0?(l.reduce((e,t)=>e+t.consistency_score,0)/l.length).toFixed(2):"N/A"})})()},[]),(0,s.jsxs)("div",{className:"p-4",children:[(0,s.jsx)("h2",{className:"text-2xl mb-4",children:"Overview"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{className:"bg-white p-4 rounded shadow",children:[(0,s.jsx)("h3",{className:"text-lg font-medium",children:"Fitness"}),(0,s.jsxs)("p",{children:["VO2 Max: ",e.vo2Max]}),(0,s.jsxs)("p",{children:["Activities This Week: ",e.activitiesThisWeek]})]}),(0,s.jsxs)("div",{className:"bg-white p-4 rounded shadow",children:[(0,s.jsx)("h3",{className:"text-lg font-medium",children:"Time Management"}),(0,s.jsxs)("p",{children:["Total Hours This Week: ",e.togglHours]})]}),(0,s.jsxs)("div",{className:"bg-white p-4 rounded shadow",children:[(0,s.jsx)("h3",{className:"text-lg font-medium",children:"Habits"}),(0,s.jsxs)("p",{children:["Average Completion Rate: ",e.habitCompletion,"%"]})]})]})]})},d=a(6495);a(9085);let r=(0,l.eI)("https://oxhtyvhbjowtybdhdxfa.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im94aHR5dmhiam93dHliZGhkeGZhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Mzk2NzIwMTAsImV4cCI6MjA1NTI0ODAxMH0.hbKqzjs1UWVfdiKUBdRBASNwyR9EGElJqGXzxojJ-u0");var o=()=>{let[e,t]=(0,i.useState)([]),[a,l]=(0,i.useState)({}),[n,c]=(0,i.useState)("");(0,i.useEffect)(()=>{(async()=>{let{data:e}=await r.from("vo2max_tests").select("test_date, vo2max_value").order("test_date"),{data:a}=await r.from("workout_stats").select("activity_type"),s=a.reduce((e,t)=>(e[t.activity_type]=(e[t.activity_type]||0)+1,e),{});t(e),l(s)})()},[]);let o=async a=>{if(a.preventDefault(),!n||isNaN(n)){alert("Please enter a valid distance in meters");return}let s=((parseFloat(n)-504.9)/44.73).toFixed(2),i=new Date().toISOString().split("T")[0],{error:l}=await r.from("vo2max_tests").insert([{test_date:i,vo2max_value:s}]);l?(console.error("Error saving VO2 max:",l),alert("Failed to save VO2 max")):(t([...e,{test_date:i,vo2max_value:s}]),c(""),alert("VO2 Max calculated: ".concat(s)))},m={labels:e.map(e=>e.test_date),datasets:[{label:"VO2 Max",data:e.map(e=>e.vo2max_value),borderColor:"#4bc0c0",fill:!1}]},x={labels:Object.keys(a),datasets:[{data:Object.values(a),backgroundColor:["#FF6384","#36A2EB","#FFCE56","#4BC0C0","#9966FF"]}]};return(0,s.jsxs)("div",{className:"p-4",children:[(0,s.jsx)("h2",{className:"text-2xl mb-4",children:"Fitness"}),(0,s.jsxs)("div",{className:"mb-8 bg-white p-4 rounded shadow",children:[(0,s.jsx)("h3",{className:"text-xl mb-2",children:"Enter Cooper Test Distance"}),(0,s.jsxs)("form",{onSubmit:o,className:"flex flex-col space-y-2",children:[(0,s.jsx)("input",{type:"number",value:n,onChange:e=>c(e.target.value),placeholder:"Distance in meters",className:"border p-2 rounded",min:"0",step:"0.1"}),(0,s.jsx)("button",{type:"submit",className:"bg-blue-500 text-white p-2 rounded hover:bg-blue-600",children:"Calculate & Save VO2 Max"})]})]}),(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsx)("h3",{className:"text-xl mb-2",children:"VO2 Max Trend"}),(0,s.jsx)(d.x1,{data:m,options:{responsive:!0}})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-xl mb-2",children:"Activity Distribution"}),(0,s.jsx)(d.by,{data:x,options:{responsive:!0}})]})]})};let m=(0,l.eI)("https://oxhtyvhbjowtybdhdxfa.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im94aHR5dmhiam93dHliZGhkeGZhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Mzk2NzIwMTAsImV4cCI6MjA1NTI0ODAxMH0.hbKqzjs1UWVfdiKUBdRBASNwyR9EGElJqGXzxojJ-u0");var x=()=>{let[e,t]=(0,i.useState)([]);(0,i.useEffect)(()=>{(async()=>{let{data:e}=await m.from("toggl_time").select("date, bucket, hours").order("date");t(e)})()},[]);let a={labels:[...new Set(e.map(e=>e.date))],datasets:[...new Set(e.map(e=>e.bucket))].map(t=>({label:t,data:e.filter(e=>e.bucket===t).map(e=>e.hours),backgroundColor:"#".concat(Math.floor(16777215*Math.random()).toString(16))}))};return(0,s.jsxs)("div",{className:"p-4",children:[(0,s.jsx)("h2",{className:"text-2xl mb-4",children:"Time Management"}),(0,s.jsx)(d.$Q,{data:a,options:{responsive:!0,scales:{x:{stacked:!0},y:{stacked:!0}}}})]})};let h=(0,l.eI)("https://oxhtyvhbjowtybdhdxfa.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im94aHR5dmhiam93dHliZGhkeGZhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Mzk2NzIwMTAsImV4cCI6MjA1NTI0ODAxMH0.hbKqzjs1UWVfdiKUBdRBASNwyR9EGElJqGXzxojJ-u0");var u=()=>{let[e,t]=(0,i.useState)([]);(0,i.useEffect)(()=>{(async()=>{let{data:e}=await h.from("habit_analytics").select("date, consistency_score").order("date");t(e)})()},[]);let a={labels:e.map(e=>e.date),datasets:[{label:"Consistency Score",data:e.map(e=>e.consistency_score),borderColor:"#4bc0c0",fill:!1}]};return(0,s.jsxs)("div",{className:"p-4",children:[(0,s.jsx)("h2",{className:"text-2xl mb-4",children:"Habits"}),(0,s.jsx)(d.x1,{data:a,options:{responsive:!0}})]})},b=()=>{let[e,t]=(0,i.useState)("overview");return(0,s.jsxs)("div",{className:"min-h-screen bg-gray-100",children:[(0,s.jsx)("nav",{className:"bg-white shadow",children:(0,s.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,s.jsx)("div",{className:"flex justify-between h-16",children:(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsx)("button",{onClick:()=>t("overview"),className:"px-3 py-2 rounded-md text-sm font-medium ".concat("overview"===e?"bg-gray-900 text-white":"text-gray-700"),children:"Overview"}),(0,s.jsx)("button",{onClick:()=>t("fitness"),className:"ml-4 px-3 py-2 rounded-md text-sm font-medium ".concat("fitness"===e?"bg-gray-900 text-white":"text-gray-700"),children:"Fitness"}),(0,s.jsx)("button",{onClick:()=>t("timeManagement"),className:"ml-4 px-3 py-2 rounded-md text-sm font-medium ".concat("timeManagement"===e?"bg-gray-900 text-white":"text-gray-700"),children:"Time Management"}),(0,s.jsx)("button",{onClick:()=>t("habits"),className:"ml-4 px-3 py-2 rounded-md text-sm font-medium ".concat("habits"===e?"bg-gray-900 text-white":"text-gray-700"),children:"Habits"})]})})})}),(0,s.jsx)("main",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8",children:(()=>{switch(e){case"overview":default:return(0,s.jsx)(c,{});case"fitness":return(0,s.jsx)(o,{});case"timeManagement":return(0,s.jsx)(x,{});case"habits":return(0,s.jsx)(u,{})}})()})]})}}},function(e){e.O(0,[196,853,699,888,774,179],function(){return e(e.s=5557)}),_N_E=e.O()}]);