(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5557:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return s(195)}])},2602:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var s in t)Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}(t,{default:function(){return i},noSSR:function(){return n}});let r=s(8754);s(5893),s(7294);let a=r._(s(5491));function l(e){return{default:(null==e?void 0:e.default)||e}}function n(e,t){return delete t.webpack,delete t.modules,e(t)}function i(e,t){let s=a.default,r={loading:e=>{let{error:t,isLoading:s,pastDelay:r}=e;return null}};e instanceof Promise?r.loader=()=>e:"function"==typeof e?r.loader=e:"object"==typeof e&&(r={...r,...e});let i=(r={...r,...t}).loader;return(r.loadableGenerated&&(r={...r,...r.loadableGenerated},delete r.loadableGenerated),"boolean"!=typeof r.ssr||r.ssr)?s({...r,loader:()=>null!=i?i().then(l):Promise.resolve(l(()=>null))}):(delete r.webpack,delete r.modules,n(s,r))}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},1159:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"LoadableContext",{enumerable:!0,get:function(){return r}});let r=s(8754)._(s(7294)).default.createContext(null)},5491:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return m}});let r=s(8754)._(s(7294)),a=s(1159),l=[],n=[],i=!1;function o(e){let t=e(),s={loading:!0,loaded:null,error:null};return s.promise=t.then(e=>(s.loading=!1,s.loaded=e,e)).catch(e=>{throw s.loading=!1,s.error=e,e}),s}class d{promise(){return this._res.promise}retry(){this._clearTimeouts(),this._res=this._loadFn(this._opts.loader),this._state={pastDelay:!1,timedOut:!1};let{_res:e,_opts:t}=this;e.loading&&("number"==typeof t.delay&&(0===t.delay?this._state.pastDelay=!0:this._delay=setTimeout(()=>{this._update({pastDelay:!0})},t.delay)),"number"==typeof t.timeout&&(this._timeout=setTimeout(()=>{this._update({timedOut:!0})},t.timeout))),this._res.promise.then(()=>{this._update({}),this._clearTimeouts()}).catch(e=>{this._update({}),this._clearTimeouts()}),this._update({})}_update(e){this._state={...this._state,error:this._res.error,loaded:this._res.loaded,loading:this._res.loading,...e},this._callbacks.forEach(e=>e())}_clearTimeouts(){clearTimeout(this._delay),clearTimeout(this._timeout)}getCurrentValue(){return this._state}subscribe(e){return this._callbacks.add(e),()=>{this._callbacks.delete(e)}}constructor(e,t){this._loadFn=e,this._opts=t,this._callbacks=new Set,this._delay=null,this._timeout=null,this.retry()}}function c(e){return function(e,t){let s=Object.assign({loader:null,loading:null,delay:200,timeout:null,webpack:null,modules:null},t),l=null;function o(){if(!l){let t=new d(e,s);l={getCurrentValue:t.getCurrentValue.bind(t),subscribe:t.subscribe.bind(t),retry:t.retry.bind(t),promise:t.promise.bind(t)}}return l.promise()}if(!i){let e=s.webpack?s.webpack():s.modules;e&&n.push(t=>{for(let s of e)if(t.includes(s))return o()})}function c(e,t){!function(){o();let e=r.default.useContext(a.LoadableContext);e&&Array.isArray(s.modules)&&s.modules.forEach(t=>{e(t)})}();let n=r.default.useSyncExternalStore(l.subscribe,l.getCurrentValue,l.getCurrentValue);return r.default.useImperativeHandle(t,()=>({retry:l.retry}),[]),r.default.useMemo(()=>{var t;return n.loading||n.error?r.default.createElement(s.loading,{isLoading:n.loading,pastDelay:n.pastDelay,timedOut:n.timedOut,error:n.error,retry:l.retry}):n.loaded?r.default.createElement((t=n.loaded)&&t.default?t.default:t,e):null},[e,n])}return c.preload=()=>o(),c.displayName="LoadableComponent",r.default.forwardRef(c)}(o,e)}function u(e,t){let s=[];for(;e.length;){let r=e.pop();s.push(r(t))}return Promise.all(s).then(()=>{if(e.length)return u(e,t)})}c.preloadAll=()=>new Promise((e,t)=>{u(l).then(e,t)}),c.preloadReady=e=>(void 0===e&&(e=[]),new Promise(t=>{let s=()=>(i=!0,t());u(n,e).then(s,s)})),window.__NEXT_PRELOADREADY=c.preloadReady;let m=c},195:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return Q}});var r=s(5893),a=s(7294);let l=[{id:"overview",name:"Overview",icon:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})},{id:"fitness",name:"Fitness",icon:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 8v8m-4-5v5m-4-2v2m-2 4h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})},{id:"time",name:"Time",icon:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})},{id:"habits",name:"Habits",icon:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"})})}];function n(e){let{activePanel:t,setActivePanel:s,isOpen:a,setIsOpen:n}=e,i=e=>{s(e),window.innerWidth<768&&n(!1)};return(0,r.jsxs)("div",{className:"fixed inset-y-0 left-0 transform md:relative md:translate-x-0 z-30 transition duration-300 ease-in-out \n        ".concat(a?"translate-x-0":"-translate-x-full md:translate-x-0"," \n        w-64 md:w-16 lg:w-64 bg-gray-900 border-r border-blue-500/30 overflow-y-auto"),children:[(0,r.jsxs)("div",{className:"flex justify-between items-center px-4 h-16 border-b border-blue-500/30 md:hidden",children:[(0,r.jsx)("div",{className:"font-orbitron text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-purple-500",children:"Dashboard"}),(0,r.jsx)("button",{onClick:()=>n(!1),className:"text-gray-400 hover:text-white",children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,r.jsxs)("nav",{className:"flex flex-col h-full py-6",children:[(0,r.jsx)("div",{className:"hidden md:flex lg:hidden items-center justify-center mb-8",children:(0,r.jsx)("div",{className:"h-10 w-10 rounded-full bg-gradient-to-r from-blue-400 to-purple-500 flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-white font-bold text-sm",children:"DP"})})}),(0,r.jsx)("div",{className:"hidden lg:flex items-center justify-center mb-8",children:(0,r.jsx)("div",{className:"h-12 w-12 rounded-full bg-gradient-to-r from-blue-400 to-purple-500 flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-white font-bold text-lg",children:"DP"})})}),(0,r.jsx)("div",{className:"space-y-2 px-2",children:l.map(e=>(0,r.jsxs)("button",{onClick:()=>i(e.id),className:"w-full flex items-center py-3 px-2 md:justify-center lg:justify-start lg:pl-4 rounded-md transition-all duration-300 group ".concat(t===e.id?"bg-blue-500/20 text-blue-400 border-l-4 border-blue-500":"text-gray-400 hover:bg-gray-800 hover:text-white"),children:[(0,r.jsxs)("div",{className:"flex items-center justify-center lg:justify-start w-full lg:w-auto",children:[(0,r.jsx)("span",{className:"inline-flex items-center justify-center h-8 w-8",children:e.icon}),(0,r.jsx)("span",{className:"lg:block hidden md:hidden ml-3 font-medium",children:e.name})]}),t===e.id&&(0,r.jsx)("div",{className:"hidden lg:block h-8 w-1 bg-blue-500 rounded-full absolute right-0 transform -translate-x-3"})]},e.id))}),(0,r.jsx)("div",{className:"mt-auto px-2",children:(0,r.jsx)("button",{className:"w-full flex items-center py-3 px-2 md:justify-center lg:justify-start lg:pl-4 rounded-md text-gray-400 hover:bg-gray-800 hover:text-white transition-all duration-300 group",children:(0,r.jsxs)("div",{className:"flex items-center justify-center lg:justify-start w-full lg:w-auto",children:[(0,r.jsx)("span",{className:"inline-flex items-center justify-center h-8 w-8",children:(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})}),(0,r.jsx)("span",{className:"lg:block hidden md:hidden ml-3 font-medium",children:"Settings"})]})})})]})]})}let i=[{label:"Last 7 Days",days:7},{label:"Last 30 Days",days:30},{label:"Last 90 Days",days:90},{label:"Year to Date",custom:!0}];function o(e){let{dateRange:t,setDateRange:s,onClose:l}=e,[n,o]=(0,a.useState)(t.startDate.toISOString().split("T")[0]),[d,c]=(0,a.useState)(t.endDate.toISOString().split("T")[0]),[u,m]=(0,a.useState)(null);(0,a.useEffect)(()=>{new Date(d)<new Date(n)&&c(n)},[n,d]);let h=e=>{let t;m(e.label);let s=new Date;s.setHours(23,59,59,999),e.custom&&"Year to Date"===e.label?t=new Date(s.getFullYear(),0,1):((t=new Date).setDate(s.getDate()-e.days),t.setHours(0,0,0,0)),o(t.toISOString().split("T")[0]),c(s.toISOString().split("T")[0])};return(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-white",children:"Select Date Range"}),(0,r.jsx)("button",{onClick:l,className:"text-gray-400 hover:text-white p-1","aria-label":"Close date picker",children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),(0,r.jsx)("div",{className:"grid grid-cols-2 gap-2",children:i.map(e=>(0,r.jsx)("button",{onClick:()=>h(e),className:"px-3 py-2 text-sm font-medium rounded-md transition-all duration-300 ".concat(u===e.label?"bg-blue-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"),children:e.label},e.label))}),(0,r.jsxs)("div",{className:"border-t border-gray-700 my-3 pt-3",children:[(0,r.jsx)("span",{className:"text-xs text-gray-400 mb-2 block",children:"Or select custom range:"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs text-gray-400 mb-1",children:"Start Date"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("input",{type:"date",value:n,onChange:e=>{o(e.target.value),m(null)},className:"w-full pl-2 pr-8 py-2 bg-gray-700 rounded border border-gray-600 text-white text-sm focus:ring-1 focus:ring-blue-500 focus:border-blue-500 focus:outline-none"}),(0,r.jsx)("div",{className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-400 pointer-events-none",children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs text-gray-400 mb-1",children:"End Date"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("input",{type:"date",value:d,min:n,onChange:e=>{c(e.target.value),m(null)},className:"w-full pl-2 pr-8 py-2 bg-gray-700 rounded border border-gray-600 text-white text-sm focus:ring-1 focus:ring-blue-500 focus:border-blue-500 focus:outline-none"}),(0,r.jsx)("div",{className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-400 pointer-events-none",children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})})]})]})]})]}),n&&d&&(0,r.jsxs)("div",{className:"bg-gray-700/50 p-2 rounded text-center text-sm",children:[(0,r.jsxs)("span",{className:"text-gray-300",children:[new Date(n).toLocaleDateString()," - ",new Date(d).toLocaleDateString()]}),(0,r.jsxs)("div",{className:"text-xs text-blue-300 mt-1",children:[Math.round((new Date(d)-new Date(n))/864e5+1)," days"]})]}),(0,r.jsx)("div",{className:"flex justify-end",children:(0,r.jsx)("button",{onClick:()=>{s({startDate:new Date(n),endDate:new Date(d)}),l()},className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded text-sm font-medium transition-colors",children:"Apply Range"})})]})}function d(e){let{userData:t,dateRange:s,setDateRange:l,toggleSidebar:n}=e,[i,d]=(0,a.useState)(!1),c=new Date().toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"});return(0,r.jsx)("header",{className:"bg-gray-800 border-b border-blue-500/30 sticky top-0 z-20",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("button",{onClick:n,className:"mr-3 md:hidden p-2 rounded-md text-gray-400 hover:text-white hover:bg-gray-700 focus:outline-none","aria-label":"Toggle sidebar menu",children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)("h1",{className:"text-xl sm:text-2xl font-orbitron text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-purple-500",children:"MY DAILY PROOF"})})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2 sm:space-x-4",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsxs)("button",{onClick:()=>d(!i),className:"px-2 sm:px-3 py-2 text-sm font-medium rounded-md bg-blue-500/20 hover:bg-blue-500/30 border border-blue-400/30 transition-all duration-300 flex items-center space-x-1 sm:space-x-2",children:[(0,r.jsxs)("span",{className:"hidden xs:inline",children:[s.startDate.toLocaleDateString()," - ",s.endDate.toLocaleDateString()]}),(0,r.jsx)("span",{className:"xs:hidden",children:"Date"}),(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),i&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 md:bg-transparent md:inset-auto md:absolute md:right-0 md:mt-2 md:w-72",children:(0,r.jsx)("div",{className:"absolute right-4 top-20 w-72 md:right-0 md:top-0 md:w-72 md:static bg-gray-800 rounded-md shadow-lg p-4 border border-blue-500/30",children:(0,r.jsx)(o,{dateRange:s,setDateRange:l,onClose:()=>d(!1)})})})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsxs)("div",{className:"text-right hidden sm:block",children:[(0,r.jsx)("div",{className:"text-sm font-medium text-blue-300",children:t.name}),(0,r.jsx)("div",{className:"text-xs text-gray-400",children:c})]}),(0,r.jsx)("img",{className:"h-8 w-8 sm:h-10 sm:w-10 rounded-full border-2 border-blue-500/50",src:t.avatar,alt:t.name})]})]})]})})})}function c(){let[e,t]=(0,a.useState)(0),[s,l]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{let e=Date.now(),s=setInterval(()=>{t(Math.floor((Date.now()-e)/1e3))},1e3);return()=>clearInterval(s)},[]),(0,a.useEffect)(()=>{e>=10&&l(!0)},[e]),(0,a.useEffect)(()=>{if(e>=15)try{for(let e in window)if(e.startsWith("__NEXT_DATA__")){console.log("Attempting emergency render bypass"),window.location.href="/diagnostic";break}}catch(e){console.error("Error in emergency render bypass:",e)}},[e]),(0,r.jsx)("div",{className:"fixed inset-0 bg-gray-900 z-50 flex flex-col items-center justify-center",children:(0,r.jsxs)("div",{className:"flex flex-col items-center",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"h-24 w-24 rounded-full border-t-4 border-b-4 border-blue-500 animate-spin"}),(0,r.jsx)("div",{className:"h-24 w-24 rounded-full border-r-4 border-l-4 border-purple-500 animate-spin absolute inset-0",style:{animationDirection:"reverse",animationDuration:"1.5s"}}),(0,r.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,r.jsx)("div",{className:"h-12 w-12 rounded-full bg-gray-900 flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-white font-bold text-lg",children:"DP"})})})]}),(0,r.jsx)("h2",{className:"text-xl mt-6 text-white font-bold",children:"MY DAILY PROOF"}),(0,r.jsxs)("p",{className:"text-blue-300 mt-2 animate-pulse",children:["Loading your personal dashboard... ",e,"s"]}),s&&(0,r.jsxs)("div",{className:"mt-8 max-w-md px-4 py-3 bg-gray-800 rounded-lg text-gray-300 text-sm",children:[(0,r.jsx)("p",{className:"text-yellow-400 font-semibold mb-2",children:"Loading is taking longer than expected."}),(0,r.jsx)("p",{className:"mb-2",children:"This could be caused by:"}),(0,r.jsxs)("ul",{className:"list-disc pl-5 space-y-1 mb-3",children:[(0,r.jsx)("li",{children:"Slow or unstable internet connection"}),(0,r.jsx)("li",{children:"Browser compatibility issues"}),(0,r.jsx)("li",{children:"Missing environment variables"}),(0,r.jsx)("li",{children:"JavaScript errors"})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("button",{onClick:()=>window.location.reload(),className:"px-3 py-1 bg-blue-600 rounded text-sm hover:bg-blue-700",children:"Refresh Page"}),(0,r.jsx)("button",{onClick:()=>window.location.href="/diagnostic",className:"px-3 py-1 bg-green-600 rounded text-sm hover:bg-green-700",children:"Run Diagnostics"})]})]})]})})}var u=s(6490);let m=()=>{let e="https://oxhtyvhbjowtybdhdxfa.supabase.co",t="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im94aHR5dmhiam93dHliZGhkeGZhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Mzk2NzIwMTAsImV4cCI6MjA1NTI0ODAxMH0.hbKqzjs1UWVfdiKUBdRBASNwyR9EGElJqGXzxojJ-u0";if(!e||!t)return console.error("Supabase credentials missing - check your environment variables"),null;try{return(0,u.eI)(e,t)}catch(e){return console.error("Error creating Supabase client:",e),null}};function h(){let[e,t]=(0,a.useState)(!1),[s,l]=(0,a.useState)(null),[n,i]=(0,a.useState)(!1),o=async()=>{i(!0);try{let e=m();if(!e)throw Error("Supabase client not initialized. Check your environment variables.");let{data:t,error:s}=await e.from("workout_stats").select("*").limit(1);if(s)throw Error("Database connection error: ".concat(s.message));l({success:!0,message:"Successfully connected to Supabase. Data received: ".concat(JSON.stringify(t))})}catch(e){console.error("Database connection test failed:",e),l({success:!1,message:e.message})}finally{i(!1)}};return e?(0,r.jsxs)("div",{className:"fixed bottom-4 right-4 bg-gray-800 p-4 rounded-lg shadow-lg border border-gray-700 w-full max-w-md z-50",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,r.jsx)("h3",{className:"text-lg font-bold text-white",children:"Dashboard Debug Panel"}),(0,r.jsx)("button",{onClick:()=>t(!1),className:"text-gray-400 hover:text-white",children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("div",{children:(0,r.jsx)("button",{onClick:o,disabled:n,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded disabled:opacity-50",children:n?"Testing Connection...":"Test Database Connection"})}),(0,r.jsx)("div",{children:(0,r.jsx)("button",{onClick:()=>{let e={NEXT_PUBLIC_SUPABASE_URL:"https://oxhtyvhbjowtybdhdxfa.supabase.co",NEXT_PUBLIC_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im94aHR5dmhiam93dHliZGhkeGZhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Mzk2NzIwMTAsImV4cCI6MjA1NTI0ODAxMH0.hbKqzjs1UWVfdiKUBdRBASNwyR9EGElJqGXzxojJ-u0"},t=Object.keys(e).filter(t=>!e[t]);0===t.length?l({success:!0,message:"All environment variables are set."}):l({success:!1,message:"Missing environment variables: ".concat(t.join(", "))})},className:"w-full bg-green-600 hover:bg-green-700 text-white font-medium py-2 px-4 rounded",children:"Check Environment Variables"})}),s&&(0,r.jsxs)("div",{className:"p-3 rounded ".concat(s.success?"bg-green-900/30 border border-green-500":"bg-red-900/30 border border-red-500"),children:[(0,r.jsx)("h4",{className:"font-medium ".concat(s.success?"text-green-400":"text-red-400"),children:s.success?"Success":"Error"}),(0,r.jsx)("pre",{className:"text-sm whitespace-pre-wrap mt-1 text-gray-300",children:s.message})]}),(0,r.jsx)("div",{className:"text-sm text-gray-400",children:(0,r.jsx)("p",{children:"This panel is for development and debugging purposes only."})})]})]}):(0,r.jsx)("button",{onClick:()=>t(!0),className:"fixed bottom-4 right-4 bg-blue-600 text-white p-2 rounded-full shadow-lg",title:"Open Debug Panel",children:(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})})}let x={map:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})}),flame:(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 18.657A8 8 0 016.343 7.343S7 9 9 10c0-2 .5-5 2.986-7C14 5 16.09 5.777 17.656 7.343A7.975 7.975 0 0120 13a7.975 7.975 0 01-2.343 5.657z"}),(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.879 16.121A3 3 0 1012.015 11L11 14H9c0 .768.293 1.536.879 2.121z"})]}),clock:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),heart:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})})};function g(e){let{stats:t,isLoading:s}=e;return s?(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[,,,,].fill(0).map((e,t)=>(0,r.jsxs)("div",{className:"bg-gray-800 bg-opacity-60 rounded-lg border border-blue-500/20 p-4 backdrop-blur-sm animate-pulse",children:[(0,r.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,r.jsx)("div",{className:"h-4 w-24 bg-gray-700 rounded"}),(0,r.jsx)("div",{className:"h-8 w-8 bg-gray-700 rounded-full"})]}),(0,r.jsx)("div",{className:"h-8 w-20 bg-gray-700 rounded mt-4"})]},t))}):(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:t.map((e,t)=>(0,r.jsxs)("div",{className:"bg-gray-800 bg-opacity-60 rounded-lg border border-blue-500/20 p-4 backdrop-blur-sm transition-all duration-300 hover:shadow-lg hover:shadow-blue-500/10 hover:scale-[1.02]",children:[(0,r.jsxs)("div",{className:"flex justify-between items-start",children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-gray-400",children:e.title}),(0,r.jsx)("div",{className:"p-2 rounded-full bg-blue-500/20 text-blue-400",children:x[e.icon]||(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})})]}),(0,r.jsxs)("div",{className:"mt-4 flex items-baseline",children:[(0,r.jsx)("span",{className:"text-2xl font-semibold text-white",children:"number"==typeof e.value?e.value.toLocaleString():e.value}),e.unit&&(0,r.jsx)("span",{className:"ml-1 text-sm text-gray-400",children:e.unit})]})]},t))})}var b=s(5152),p=s.n(b);let v=p()(()=>Promise.all([s.e(196),s.e(676),s.e(430)]).then(s.bind(s,6495)).then(e=>e.Line),{loadableGenerated:{webpack:()=>[null]},ssr:!1}),f=p()(()=>Promise.all([s.e(196),s.e(676),s.e(430)]).then(s.bind(s,6495)).then(e=>e.Bar),{loadableGenerated:{webpack:()=>[null]},ssr:!1}),j=p()(()=>Promise.all([s.e(196),s.e(676),s.e(430)]).then(s.bind(s,6495)).then(e=>e.Pie),{loadableGenerated:{webpack:()=>[null]},ssr:!1}),w=p()(()=>Promise.all([s.e(196),s.e(676),s.e(430)]).then(s.bind(s,6495)).then(e=>e.Doughnut),{loadableGenerated:{webpack:()=>[null]},ssr:!1}),y={responsive:!0,maintainAspectRatio:!0,plugins:{legend:{position:"top",labels:{color:"#D1D5DB",boxWidth:12,padding:10,font:{size:11}}},tooltip:{backgroundColor:"rgba(17, 24, 39, 0.8)",titleColor:"#F9FAFB",bodyColor:"#F3F4F6",borderColor:"rgba(59, 130, 246, 0.5)",borderWidth:1,padding:10,cornerRadius:6,displayColors:!0,usePointStyle:!0,boxPadding:3}},scales:{x:{grid:{color:"rgba(31, 41, 55, 0.2)",borderColor:"rgba(31, 41, 55, 0.5)"},ticks:{color:"#9CA3AF",maxRotation:45,minRotation:0,font:{size:10}}},y:{grid:{color:"rgba(31, 41, 55, 0.2)",borderColor:"rgba(31, 41, 55, 0.5)"},ticks:{color:"#9CA3AF",font:{size:10}}}}};function N(e){let{data:t={labels:[],datasets:[]},type:l="line",height:n=300,isLoading:i=!1,options:o={}}=e,[d,c]=(0,a.useState)({}),[u,m]=(0,a.useState)(!1),[h,x]=(0,a.useState)(null),g=(()=>{if(!t||!t.labels||!t.datasets||!Array.isArray(t.labels)||!Array.isArray(t.datasets))return!1;if(t.datasets.length>0){if("line"===l||"bar"===l)return t.datasets.every(e=>e&&Array.isArray(e.data)&&e.data.length>0);if("pie"===l||"doughnut"===l)return t.datasets.length>0&&Array.isArray(t.datasets[0].data)&&t.datasets[0].data.length>0}return t.labels.length>0&&t.datasets.length>0})();if((0,a.useEffect)(()=>{m(!0);try{Promise.all([s.e(196),s.e(676),s.e(85)]).then(s.bind(s,9085))}catch(e){console.error("Failed to load Chart.js:",e),x("Failed to load chart library")}return()=>m(!1)},[]),(0,a.useEffect)(()=>{if(!u)return;let e=()=>{try{let e;let t=window.innerWidth;e=t<640?1.25:t<1024?1.75:2;let s={...y,...o,responsive:!0,maintainAspectRatio:!0,aspectRatio:e};c(s)}catch(e){console.error("Error updating chart options:",e),x("Failed to configure chart")}};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[o,l,u]),i)return(0,r.jsx)("div",{className:"relative w-full",style:{height:"".concat(n,"px")},children:(0,r.jsx)("div",{className:"h-full w-full flex items-center justify-center",children:(0,r.jsx)("div",{className:"h-12 w-12 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"})})});if(h)return(0,r.jsx)("div",{className:"relative w-full",style:{height:"".concat(n,"px")},children:(0,r.jsxs)("div",{className:"h-full w-full flex flex-col items-center justify-center bg-red-900/10 rounded-lg border border-red-500/20",children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-red-400 mb-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),(0,r.jsxs)("div",{className:"text-center px-4",children:[(0,r.jsx)("p",{className:"text-red-400 font-medium mb-1",children:"Chart Error"}),(0,r.jsx)("p",{className:"text-gray-300 text-sm",children:h})]})]})});if(!u||!g)return(0,r.jsx)("div",{className:"relative w-full",style:{height:"".concat(n,"px")},children:(0,r.jsx)("div",{className:"h-full w-full flex items-center justify-center text-gray-400 text-center p-4",children:"No data available for the selected period"})});try{let e;switch(l){case"line":default:e=v;break;case"bar":e=f;break;case"pie":e=j;break;case"doughnut":e=w}return(0,r.jsx)("div",{className:"relative w-full",style:{height:"".concat(n,"px")},children:(0,r.jsx)(e,{data:t,options:d})})}catch(e){return console.error("Error rendering chart:",e),(0,r.jsx)("div",{className:"relative w-full",style:{height:"".concat(n,"px")},children:(0,r.jsxs)("div",{className:"h-full w-full flex flex-col items-center justify-center bg-red-900/10 rounded-lg border border-red-500/20",children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-red-400 mb-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),(0,r.jsxs)("div",{className:"text-center px-4",children:[(0,r.jsx)("p",{className:"text-red-400 font-medium mb-1",children:"Chart Rendering Error"}),(0,r.jsx)("p",{className:"text-gray-300 text-sm",children:"Failed to render chart with the provided data"})]})]})})}}function k(e){let{quote:t,author:s}=e;return(0,r.jsx)("div",{className:"bg-gray-800 bg-opacity-60 rounded-lg border border-blue-500/20 p-4 backdrop-blur-sm",children:(0,r.jsxs)("div",{className:"flex flex-col h-full",children:[(0,r.jsx)("div",{className:"text-blue-400 mb-3",children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 opacity-50",fill:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{d:"M14.017 21v-7.391c0-5.704 3.731-9.57 8.983-10.609l.995 2.151c-2.432.917-3.995 3.638-3.995 5.849h4v10h-9.983zm-14.017 0v-7.391c0-5.704 3.748-9.57 9-10.609l.996 2.151c-2.433.917-3.996 3.638-3.996 5.849h3.983v10h-9.983z"})})}),(0,r.jsx)("div",{className:"flex-1",children:(0,r.jsx)("p",{className:"text-gray-300 text-lg font-light italic leading-relaxed mb-4",children:t})}),(0,r.jsx)("div",{className:"mt-auto",children:(0,r.jsxs)("p",{className:"text-blue-400 font-medium",children:["— ",s]})})]})})}let L={workout:(0,r.jsx)("div",{className:"rounded-full bg-blue-500/20 p-2",children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-blue-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),focus:(0,r.jsx)("div",{className:"rounded-full bg-purple-500/20 p-2",children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-purple-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})})}),habit:(0,r.jsx)("div",{className:"rounded-full bg-amber-500/20 p-2",children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-amber-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})})};function C(e){let{activities:t,isLoading:s}=e;return(0,r.jsxs)("div",{className:"bg-gray-800 bg-opacity-60 rounded-lg border border-blue-500/20 p-4 backdrop-blur-sm",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-blue-300 mb-4",children:"Recent Activity"}),s?[,,,].fill(0).map((e,t)=>(0,r.jsxs)("div",{className:"flex items-start space-x-3 mb-4 animate-pulse",children:[(0,r.jsx)("div",{className:"rounded-full bg-gray-700 h-9 w-9"}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("div",{className:"h-4 bg-gray-700 w-24 rounded mb-2"}),(0,r.jsx)("div",{className:"h-3 bg-gray-700 w-16 rounded"})]}),(0,r.jsx)("div",{className:"h-4 bg-gray-700 w-12 rounded"})]},t)):t.length>0?t.map((e,t)=>(0,r.jsxs)("div",{className:"flex items-start space-x-3 mb-4 p-2 rounded-md transition-all duration-300 hover:bg-gray-700/30",children:[L[e.type]||L.workout,(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("p",{className:"text-white font-medium",children:e.title}),(0,r.jsx)("p",{className:"text-gray-400 text-sm",children:e.date})]}),(0,r.jsx)("div",{className:"text-blue-300 font-medium",children:e.value})]},t)):(0,r.jsx)("div",{className:"text-center py-8 text-gray-400",children:"No recent activity"})]})}let D={value:42.5,trend:1.5},S=[{type:"workout",title:"Morning Run",date:"2023-01-10",value:"5.20 km"},{type:"focus",title:"Deep Work",date:"2023-01-09",value:"4.5 hrs"},{type:"habit",title:"Daily Habits",date:"2023-01-10",value:"4/5 complete"}];function _(e){let{dateRange:t}=e,[s,l]=(0,a.useState)({vo2Max:{value:0,trend:0},workouts:{value:0,trend:0},focusHours:{value:0,trend:0},habitStreak:{value:0,trend:0}}),[n,i]=(0,a.useState)({labels:[],datasets:[]}),[o,d]=(0,a.useState)([]),[c,u]=(0,a.useState)(!0),h=e=>e.toISOString().split("T")[0];return(0,a.useEffect)(()=>{(async function(){u(!0);try{let e=h(t.startDate),s=h(t.endDate),r=m(),a=D.value,n=D.trend,o=0,c=0,u=0,x=[...S];if(r){let{data:t}=await r.from("vo2max_tests").select("*").order("test_date",{ascending:!1}).limit(1);t&&t.length>0&&(a=t[0].vo2max_value);let{data:l}=await r.from("workout_stats").select("*").gte("date",e).lte("date",s);if(l){o=l.length;let e=l.slice(0,3).map(e=>({type:"workout",title:e.title||e.activity_type,date:new Date(e.date).toLocaleDateString(),value:"".concat((e.distance/1e3).toFixed(2)," km")}));e.length>0&&(x=[...e,...x.slice(0,3-e.length)])}let{data:n}=await r.from("toggl_time").select("*").gte("date",e).lte("date",s);n&&(c=n.filter(e=>"Deep Work"===e.bucket).reduce((e,t)=>e+t.hours,0));let{data:i}=await r.from("habit_tracking").select("*").gte("habit_date",e).lte("habit_date",s);if(i){let e={};i.forEach(t=>{e[t.habit_date]||(e[t.habit_date]={total:0,completed:0}),e[t.habit_date].total++,t.completed&&e[t.habit_date].completed++}),u=Object.keys(e).filter(t=>{let s=e[t];return s.completed/s.total>=.8}).length}}l({vo2Max:{value:a,trend:n},workouts:{value:o,trend:0},focusHours:{value:c.toFixed(1),trend:0},habitStreak:{value:u,trend:0}}),i({labels:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],datasets:[{label:"Workouts",data:[1,0,1,1,0,1,0],borderColor:"rgba(66, 153, 225, 0.8)",backgroundColor:"rgba(66, 153, 225, 0.2)",yAxisID:"y-axis-1"},{label:"Focus Hours",data:[4.5,5.2,3.8,6.1,4.3,1.5,.8],borderColor:"rgba(236, 72, 153, 0.8)",backgroundColor:"rgba(236, 72, 153, 0.2)",yAxisID:"y-axis-2"}]}),d(x)}catch(e){console.error("Error fetching dashboard data:",e),d(S)}finally{u(!1)}})()},[t]),(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-orbitron text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-purple-500",children:"Dashboard Overview"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,r.jsx)(g,{title:"VO₂ Max",value:s.vo2Max.value,unit:"ml/kg/min",trend:s.vo2Max.trend,icon:"heart",isLoading:c,color:"purple"}),(0,r.jsx)(g,{title:"Workouts",value:s.workouts.value,unit:"sessions",trend:s.workouts.trend,icon:"activity",isLoading:c,color:"blue"}),(0,r.jsx)(g,{title:"Focus Time",value:s.focusHours.value,unit:"hours",trend:s.focusHours.trend,icon:"clock",isLoading:c,color:"green"}),(0,r.jsx)(g,{title:"Habit Streak",value:s.habitStreak.value,unit:"days",trend:s.habitStreak.trend,icon:"check-circle",isLoading:c,color:"amber"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,r.jsxs)("div",{className:"lg:col-span-2 bg-gray-800 bg-opacity-60 rounded-lg border border-blue-500/20 p-4 backdrop-blur-sm",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-blue-300 mb-4",children:"Weekly Activity"}),(0,r.jsx)(N,{data:n,type:"line",height:300,isLoading:c,options:{scales:{"y-axis-1":{type:"linear",position:"left",title:{display:!0,text:"Workouts"},suggestedMin:0,suggestedMax:2,ticks:{stepSize:1}},"y-axis-2":{type:"linear",position:"right",title:{display:!0,text:"Hours"},suggestedMin:0,grid:{drawOnChartArea:!1}}}}})]}),(0,r.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,r.jsx)(k,{quote:"Consistency over intensity. Those who show up every day outperform those who show up occasionally with maximum effort.",author:"James Clear"}),(0,r.jsx)(C,{activities:o,isLoading:c})]})]}),(0,r.jsxs)("div",{className:"bg-gray-800 bg-opacity-60 rounded-lg border border-blue-500/20 p-6 backdrop-blur-sm",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-blue-300 mb-4",children:"Dashboard Inspiration"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,r.jsxs)("div",{className:"p-4 rounded-lg bg-gray-800/50 border border-blue-500/10",children:[(0,r.jsx)("h4",{className:"text-blue-300 font-medium mb-2",children:"Naval Ravikant"}),(0,r.jsx)("p",{className:"text-gray-300 text-sm",children:"Prioritizing health, learning, and deep work as foundational elements for personal growth and wealth creation."})]}),(0,r.jsxs)("div",{className:"p-4 rounded-lg bg-gray-800/50 border border-purple-500/10",children:[(0,r.jsx)("h4",{className:"text-purple-300 font-medium mb-2",children:"Peter Attia"}),(0,r.jsx)("p",{className:"text-gray-300 text-sm",children:"Tracking fitness metrics like VO2 max, strength, and other longevity indicators to optimize health over the long term."})]}),(0,r.jsxs)("div",{className:"p-4 rounded-lg bg-gray-800/50 border border-green-500/10",children:[(0,r.jsx)("h4",{className:"text-green-300 font-medium mb-2",children:"Balaji Srinivasan"}),(0,r.jsx)("p",{className:"text-gray-300 text-sm",children:'Public accountability through "Proof of Workout" concept, encouraging transparency in fitness and productivity efforts.'})]}),(0,r.jsxs)("div",{className:"p-4 rounded-lg bg-gray-800/50 border border-amber-500/10",children:[(0,r.jsx)("h4",{className:"text-amber-300 font-medium mb-2",children:"James Clear"}),(0,r.jsx)("p",{className:"text-gray-300 text-sm",children:"Emphasizing small, consistent habits to drive meaningful change. Making habit data public reinforces accountability."})]})]})]})]})}let M=e=>e?"".concat((e/1e3).toFixed(2)," km"):"0 km",A=e=>{if(!e)return"0 min";let t=Math.floor(e/3600),s=Math.floor(e%3600/60);return t>0?"".concat(t,"h ").concat(s,"min"):"".concat(s," min")},z=e=>{if(!e)return null;switch(e.toLowerCase()){case"running":return(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})});case"cycling":case"indoor_cycling":return(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})});case"swimming":return(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M9 19l3 3m0 0l3-3m-3 3V10"})});default:return(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}};function W(e){let{activityType:t,title:s,date:a,distance:l,duration:n,calories:i,heartRate:o,isLoading:d}=e;if(d)return(0,r.jsxs)("div",{className:"bg-gray-800 bg-opacity-60 rounded-lg border border-blue-500/20 p-4 backdrop-blur-sm animate-pulse",children:[(0,r.jsx)("div",{className:"h-5 w-24 bg-gray-700 rounded mb-2"}),(0,r.jsx)("div",{className:"h-6 w-32 bg-gray-700 rounded mb-4"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,r.jsx)("div",{className:"h-5 w-16 bg-gray-700 rounded"}),(0,r.jsx)("div",{className:"h-5 w-16 bg-gray-700 rounded"}),(0,r.jsx)("div",{className:"h-5 w-16 bg-gray-700 rounded"}),(0,r.jsx)("div",{className:"h-5 w-16 bg-gray-700 rounded"})]})]});let c="Unknown date";if(a)try{c=new Date(a).toLocaleDateString()}catch(e){console.error("Error formatting date:",e)}let u=s||(t?"".concat(t," workout"):"Workout");return(0,r.jsxs)("div",{className:"bg-gray-800 bg-opacity-60 rounded-lg border border-blue-500/20 p-4 backdrop-blur-sm transition-all duration-300 hover:shadow-lg hover:shadow-blue-500/10 hover:scale-[1.02]",children:[(0,r.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-gray-400 text-sm",children:c}),(0,r.jsx)("h3",{className:"text-white font-medium",children:u})]}),(0,r.jsx)("div",{className:"p-2 rounded-full bg-blue-500/20 text-blue-400",children:z(t)})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-x-4 gap-y-2 mt-4 text-sm",children:[l&&(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1 text-blue-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})}),(0,r.jsx)("span",{className:"text-gray-300",children:M(l)})]}),n&&(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1 text-purple-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,r.jsx)("span",{className:"text-gray-300",children:A(n)})]}),i&&(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1 text-amber-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 18.657A8 8 0 016.343 7.343S7 9 9 10c0-2 .5-5 2.986-7C14 5 16.09 5.777 17.656 7.343A7.975 7.975 0 0120 13a7.975 7.975 0 01-2.343 5.657z"}),(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.879 16.121A3 3 0 1012.015 11L11 14H9c0 .768.293 1.536.879 2.121z"})]}),(0,r.jsxs)("span",{className:"text-gray-300",children:[i," kcal"]})]}),o&&(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1 text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),(0,r.jsxs)("span",{className:"text-gray-300",children:[o," bpm"]})]})]})]})}function O(e){let{label:t,placeholder:s,unit:l,onSubmit:n}=e,[i,o]=(0,a.useState)(""),[d,c]=(0,a.useState)(!1),[u,m]=(0,a.useState)(!1),h=async e=>{if(e.preventDefault(),!(!i||isNaN(i)||0>=parseFloat(i))){c(!0);try{await n(parseFloat(i))&&(o(""),m(!0),setTimeout(()=>m(!1),3e3))}catch(e){console.error("Error submitting value:",e)}finally{c(!1)}}};return(0,r.jsx)("div",{children:(0,r.jsxs)("form",{onSubmit:h,className:"flex items-center space-x-2",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("input",{type:"text",value:i,onChange:e=>o(e.target.value),placeholder:s,className:"pl-3 pr-10 py-2 bg-gray-800 border border-blue-500/30 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500 text-white w-32",disabled:d}),l&&(0,r.jsx)("span",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 text-sm",children:l})]}),(0,r.jsx)("button",{type:"submit",disabled:d||!i,className:"px-4 py-2 rounded-md text-white ".concat(d||!i?"bg-gray-700 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"," transition-colors duration-200"),children:d?(0,r.jsxs)("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):u?(0,r.jsx)("svg",{className:"h-5 w-5 text-green-500",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}):"Add"}),(0,r.jsx)("span",{className:"text-sm text-gray-400",children:t})]})})}let T={map:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})}),flame:(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 18.657A8 8 0 016.343 7.343S7 9 9 10c0-2 .5-5 2.986-7C14 5 16.09 5.777 17.656 7.343A7.975 7.975 0 0120 13a7.975 7.975 0 01-2.343 5.657z"}),(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.879 16.121A3 3 0 1012.015 11L11 14H9c0 .768.293 1.536.879 2.121z"})]}),clock:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),heart:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})})};function B(e){let{stats:t,isLoading:s}=e;return s?(0,r.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 md:gap-4",children:[,,,,].fill(0).map((e,t)=>(0,r.jsxs)("div",{className:"bg-gray-800 bg-opacity-60 rounded-lg border border-blue-500/20 p-3 md:p-4 backdrop-blur-sm animate-pulse",children:[(0,r.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,r.jsx)("div",{className:"h-4 w-24 bg-gray-700 rounded"}),(0,r.jsx)("div",{className:"h-8 w-8 bg-gray-700 rounded-full"})]}),(0,r.jsx)("div",{className:"h-8 w-20 bg-gray-700 rounded mt-4"})]},t))}):(0,r.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 md:gap-4",children:t.map((e,t)=>(0,r.jsxs)("div",{className:"bg-gray-800 bg-opacity-60 rounded-lg border border-blue-500/20 p-3 md:p-4 backdrop-blur-sm transition-all duration-300 hover:shadow-lg hover:shadow-blue-500/10 hover:scale-[1.02]",children:[(0,r.jsxs)("div",{className:"flex justify-between items-start",children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-gray-400",children:e.title}),(0,r.jsx)("div",{className:"p-2 rounded-full bg-blue-500/20 text-blue-400",children:T[e.icon]||(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})})]}),(0,r.jsxs)("div",{className:"mt-4 flex items-baseline",children:[(0,r.jsx)("span",{className:"text-2xl font-semibold text-white",children:"number"==typeof e.value?e.value.toLocaleString():e.value}),e.unit&&(0,r.jsx)("span",{className:"ml-1 text-sm text-gray-400",children:e.unit})]})]},t))})}let E=[{id:1,date:"2023-01-10",activity_type:"Running",title:"Morning Run",distance:5200,time:1800,calories:450,avg_hr:155},{id:2,date:"2023-01-08",activity_type:"Cycling",title:"Weekend Ride",distance:15e3,time:3600,calories:620,avg_hr:145}],R=[{test_date:"2023-01-05",vo2max_value:42.5},{test_date:"2023-01-15",vo2max_value:43.2},{test_date:"2023-01-25",vo2max_value:44.1}];function I(e){let{dateRange:t}=e,[s,l]=(0,a.useState)([]),[n,i]=(0,a.useState)([]),[o,d]=(0,a.useState)(!0),[c,u]=(0,a.useState)({totalDistance:0,totalCalories:0,totalTime:0,avgHeartRate:0}),h=e=>e.toISOString().split("T")[0];(0,a.useEffect)(()=>{!async function(){d(!0);try{let e=h(t.startDate),s=h(t.endDate),r=m(),a=E,n=R;if(r){let{data:t,error:l}=await r.from("workout_stats").select("*").gte("date",e).lte("date",s).order("date",{ascending:!1});!l&&t&&t.length>0?a=t:l&&console.error("Error fetching workouts:",l);let{data:i,error:o}=await r.from("vo2max_tests").select("*").gte("test_date",e).lte("test_date",s).order("test_date",{ascending:!0});!o&&i&&i.length>0?n=i:o&&console.error("Error fetching VO2 Max data:",o)}l(a);let o=a.reduce((e,t)=>e+(t.distance||0),0),d=a.reduce((e,t)=>e+(t.calories||0),0),c=a.reduce((e,t)=>e+(t.time||0),0),x=a.filter(e=>e.avg_hr),g=x.length?x.reduce((e,t)=>e+t.avg_hr,0)/x.length:0;u({totalDistance:parseFloat((o/1e3).toFixed(1)),totalCalories:d,totalTime:Math.round(c/60),avgHeartRate:Math.round(g)}),i(n)}catch(e){console.error("Error fetching fitness data:",e),l(E),i(R)}finally{d(!1)}}()},[t]);let x={labels:n.map(e=>e.test_date),datasets:[{label:"VO₂ Max",data:n.map(e=>e.vo2max_value),borderColor:"rgba(139, 92, 246, 0.8)",backgroundColor:"rgba(139, 92, 246, 0.2)",tension:.3,fill:!0}]},g=s.reduce((e,t)=>{let s=t.activity_type||"unknown";return e[s]=(e[s]||0)+1,e},{}),b={labels:Object.keys(g),datasets:[{data:Object.values(g),backgroundColor:["rgba(59, 130, 246, 0.8)","rgba(16, 185, 129, 0.8)","rgba(239, 68, 68, 0.8)","rgba(245, 158, 11, 0.8)","rgba(139, 92, 246, 0.8)"],borderWidth:0}]},p=async e=>{try{let s=m();if(!s)throw Error("Supabase client not available");let r=new Date().toISOString().split("T")[0],{error:a}=await s.from("vo2max_tests").upsert({test_date:r,vo2max_value:parseFloat(e),notes:""},{onConflict:"test_date"});if(a)throw a;let{data:l,error:n}=await s.from("vo2max_tests").select("*").gte("test_date",h(t.startDate)).lte("test_date",h(t.endDate)).order("test_date",{ascending:!0});if(n)throw n;return l&&i(l),!0}catch(e){return console.error("Error saving VO2 Max:",e),!1}};return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center",children:[(0,r.jsx)("h2",{className:"text-2xl font-orbitron text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-purple-500",children:"Fitness Tracker"}),(0,r.jsx)(O,{label:"Add VO₂ Max Reading",placeholder:"e.g. 42.5",unit:"ml/kg/min",onSubmit:p})]}),(0,r.jsx)(B,{stats:[{title:"Total Distance",value:c.totalDistance,unit:"km",icon:"map"},{title:"Total Calories",value:c.totalCalories,unit:"kcal",icon:"flame"},{title:"Active Time",value:c.totalTime,unit:"min",icon:"clock"},{title:"Avg Heart Rate",value:c.avgHeartRate,unit:"bpm",icon:"heart"}],isLoading:o}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,r.jsxs)("div",{className:"lg:col-span-2 bg-gray-800 bg-opacity-60 rounded-lg border border-blue-500/20 p-4 backdrop-blur-sm",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-blue-300 mb-4",children:"VO₂ Max Trend"}),(0,r.jsx)(N,{data:x,type:"line",height:300,isLoading:o||0===n.length,options:{scales:{y:{min:Math.max(0,Math.min(...n.map(e=>e.vo2max_value||0))-5),max:Math.max(...n.map(e=>e.vo2max_value||0))+5}}}})]}),(0,r.jsxs)("div",{className:"bg-gray-800 bg-opacity-60 rounded-lg border border-blue-500/20 p-4 backdrop-blur-sm",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-blue-300 mb-4",children:"Activity Types"}),(0,r.jsx)(N,{data:b,type:"doughnut",height:250,isLoading:o||0===s.length,options:{plugins:{legend:{position:"bottom"}}}})]})]}),(0,r.jsxs)("div",{className:"bg-gray-800 bg-opacity-60 rounded-lg border border-blue-500/20 p-4 backdrop-blur-sm",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-blue-300 mb-4",children:"Recent Workouts"}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:o?[,,,].fill(0).map((e,t)=>(0,r.jsx)(W,{isLoading:!0},t)):s.length>0?s.slice(0,6).map((e,t)=>(0,r.jsx)(W,{activityType:e.activity_type,title:e.title,date:e.date,distance:e.distance,duration:e.time,calories:e.calories,heartRate:e.avg_hr},t)):(0,r.jsx)("div",{className:"col-span-3 py-8 text-center text-gray-400",children:"No workouts found in the selected date range."})})]})]})}let V={clock:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),brain:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),calendar:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})},F={blue:"from-blue-400 to-blue-600",purple:"from-purple-400 to-purple-600",green:"from-green-400 to-green-600",amber:"from-amber-400 to-amber-600",red:"from-red-400 to-red-600"};function H(e){let{title:t,hours:s,subtitle:a,icon:l,isLoading:n,color:i="blue"}=e,o=F[i]||F.blue;return n?(0,r.jsxs)("div",{className:"bg-gray-800 bg-opacity-60 rounded-lg border border-blue-500/20 p-4 backdrop-blur-sm animate-pulse",children:[(0,r.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,r.jsx)("div",{className:"h-4 w-24 bg-gray-700 rounded"}),(0,r.jsx)("div",{className:"h-8 w-8 bg-gray-700 rounded-full"})]}),(0,r.jsx)("div",{className:"h-8 w-20 bg-gray-700 rounded mt-4 mb-2"}),(0,r.jsx)("div",{className:"h-4 w-32 bg-gray-700 rounded"})]}):(0,r.jsxs)("div",{className:"bg-gray-800 bg-opacity-60 rounded-lg border border-blue-500/20 p-4 backdrop-blur-sm transition-all duration-300 hover:shadow-lg hover:shadow-blue-500/10 hover:scale-[1.02]",children:[(0,r.jsxs)("div",{className:"flex justify-between items-start",children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-gray-400",children:t}),(0,r.jsx)("div",{className:"p-2 rounded-full bg-gradient-to-br ".concat(o," bg-opacity-20 text-white"),children:V[l]||V.clock})]}),(0,r.jsxs)("div",{className:"mt-4 flex items-baseline",children:[(0,r.jsx)("span",{className:"text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r ".concat(o),children:s}),(0,r.jsx)("span",{className:"ml-1 text-sm text-gray-400",children:"hours"})]}),a&&(0,r.jsx)("p",{className:"mt-1 text-sm text-gray-400",children:a})]})}let P={"Deep Work":"bg-blue-500","Health/Fitness":"bg-green-500",Learning:"bg-purple-500",Social:"bg-amber-500",Rest:"bg-red-400",Other:"bg-gray-500"};function J(e){let{data:t,isLoading:s}=e,a=[...t].sort((e,t)=>t.value-e.value);return s?(0,r.jsxs)("div",{className:"animate-pulse",children:[(0,r.jsx)("div",{className:"h-6 w-32 bg-gray-700 rounded mb-4"}),[,,,,].fill(0).map((e,t)=>(0,r.jsxs)("div",{className:"mb-3",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-1",children:[(0,r.jsx)("div",{className:"h-4 w-24 bg-gray-700 rounded"}),(0,r.jsx)("div",{className:"h-4 w-12 bg-gray-700 rounded"})]}),(0,r.jsx)("div",{className:"h-4 bg-gray-700 rounded-full"})]},t))]}):t&&0!==t.length?(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-6",children:a.map((e,t)=>(0,r.jsxs)("div",{className:"bg-gray-800 bg-opacity-40 rounded-lg p-4 backdrop-blur-sm border border-blue-500/10",children:[(0,r.jsxs)("div",{className:"flex justify-between items-start",children:[(0,r.jsx)("h4",{className:"text-white font-medium",children:e.name}),(0,r.jsxs)("span",{className:"text-blue-400 font-medium",children:[e.percentage,"%"]})]}),(0,r.jsxs)("div",{className:"mt-2 flex items-baseline",children:[(0,r.jsx)("span",{className:"text-2xl font-semibold text-white",children:e.value.toFixed(1)}),(0,r.jsx)("span",{className:"ml-1 text-sm text-gray-400",children:"hours"})]}),(0,r.jsx)("div",{className:"mt-3 w-full bg-gray-700 rounded-full h-2",children:(0,r.jsx)("div",{className:"h-2 rounded-full ".concat(P[e.name]||"bg-blue-500"),style:{width:"".concat(e.percentage,"%")}})})]},t))}),(0,r.jsxs)("div",{className:"bg-gray-800 bg-opacity-40 rounded-lg p-4 backdrop-blur-sm mt-6",children:[(0,r.jsx)("h4",{className:"text-white font-medium mb-3",children:"Overall Distribution"}),(0,r.jsx)("div",{className:"w-full h-8 flex rounded-full overflow-hidden",children:a.map((e,t)=>(0,r.jsx)("div",{className:"h-full ".concat(P[e.name]||"bg-blue-500"," relative group"),style:{width:"".concat(e.percentage,"%")},children:(0,r.jsxs)("div",{className:"opacity-0 group-hover:opacity-100 absolute bottom-full mb-2 left-1/2 transform -translate-x-1/2 bg-gray-900 text-white text-xs px-2 py-1 rounded pointer-events-none whitespace-nowrap transition-opacity duration-200",children:[e.name,": ",e.percentage,"%"]})},t))}),(0,r.jsx)("div",{className:"mt-4 flex flex-wrap gap-4",children:a.map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"w-3 h-3 ".concat(P[e.name]||"bg-blue-500"," rounded-full mr-2")}),(0,r.jsx)("span",{className:"text-sm text-gray-300",children:e.name})]},t))})]})]}):(0,r.jsx)("div",{className:"text-center py-8 text-gray-400",children:"No time data available for the selected period"})}function U(e){let{supabase:t,dateRange:s}=e,[l,n]=(0,a.useState)([]),[i,o]=(0,a.useState)(!0),[d,c]=(0,a.useState)(null),[u,m]=(0,a.useState)({byBucket:{},byDay:{}});(0,a.useEffect)(()=>{!async function(){o(!0),c(null);try{if(!t)throw Error("Supabase client is not available");if(!s||!s.startDate||!s.endDate)throw Error("Date range is invalid");let e=s.startDate.toISOString().split("T")[0],r=s.endDate.toISOString().split("T")[0],{data:a,error:l}=await t.from("toggl_time").select("*").gte("date",e).lte("date",r).order("date",{ascending:!0});if(l)throw l;let i=Array.isArray(a)?a:[];if(n(i),i.length>0){let e=i.reduce((e,t)=>{let s=t.bucket||"Uncategorized";return e[s]=(e[s]||0)+t.hours,e},{}),t=i.reduce((e,t)=>{let s=t.date;e[s]||(e[s]={});let r=t.bucket||"Uncategorized";return e[s][r]=(e[s][r]||0)+t.hours,e},{});m({byBucket:e,byDay:t})}else m({byBucket:{},byDay:{}})}catch(e){console.error("Error fetching time data:",e),c(e.message),m({byBucket:{},byDay:{}})}finally{o(!1)}}()},[t,s]);let h={labels:Object.keys(u.byBucket||{}),datasets:[{data:Object.values(u.byBucket||{}),backgroundColor:["rgba(59, 130, 246, 0.8)","rgba(16, 185, 129, 0.8)","rgba(239, 68, 68, 0.8)","rgba(245, 158, 11, 0.8)","rgba(139, 92, 246, 0.8)"],borderWidth:0}]},x={labels:Object.keys(u.byDay||{}).sort(),datasets:(()=>{if(!u.byDay)return[];let e={};Object.values(u.byDay).forEach(t=>{Object.keys(t).forEach(t=>{e[t]=!0})});let t=["rgba(59, 130, 246, 0.8)","rgba(16, 185, 129, 0.8)","rgba(239, 68, 68, 0.8)","rgba(245, 158, 11, 0.8)","rgba(139, 92, 246, 0.8)"];return Object.keys(e).map((e,s)=>({label:e,data:Object.keys(u.byDay).sort().map(t=>u.byDay[t]&&u.byDay[t][e]||0),backgroundColor:t[s%t.length],borderColor:t[s%t.length],borderWidth:2,fill:!1}))})()},g=Object.values(u.byBucket||{}).reduce((e,t)=>e+t,0),b=u.byBucket&&u.byBucket["Deep Work"]||0,p=g>0?(b/g*100).toFixed(1):0,v=new Set(l.map(e=>e.date)).size,f=v>0?(g/v).toFixed(1):0;return d&&!i?(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-orbitron text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-purple-500",children:"Time Management"}),(0,r.jsxs)("div",{className:"bg-red-900/20 border border-red-500 p-4 rounded-lg",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-red-400 mb-2",children:"Error Loading Data"}),(0,r.jsx)("p",{className:"text-white",children:d}),(0,r.jsx)("p",{className:"mt-4 text-gray-300",children:"Try refreshing the page or check your connection."})]})]}):(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-orbitron text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-purple-500",children:"Time Management"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,r.jsx)(H,{title:"Total Tracked",hours:g.toFixed(1),icon:"clock",color:"blue",isLoading:i}),(0,r.jsx)(H,{title:"Deep Work",hours:b.toFixed(1),subtitle:"".concat(p,"% of total"),icon:"brain",color:"purple",isLoading:i}),(0,r.jsx)(H,{title:"Daily Average",hours:f,subtitle:"across ".concat(v," days"),icon:"calendar",color:"green",isLoading:i})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-5 gap-6",children:[(0,r.jsxs)("div",{className:"lg:col-span-3 bg-gray-800 bg-opacity-60 rounded-lg border border-blue-500/20 p-4 backdrop-blur-sm",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-blue-300 mb-4",children:"Time Distribution"}),(0,r.jsx)(N,{data:x,type:"line",height:300,isLoading:i,options:{scales:{x:{stacked:!1},y:{stacked:!1,title:{display:!0,text:"Hours"}}}}})]}),(0,r.jsxs)("div",{className:"lg:col-span-2 bg-gray-800 bg-opacity-60 rounded-lg border border-blue-500/20 p-4 backdrop-blur-sm",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-blue-300 mb-4",children:"Focus Categories"}),(0,r.jsx)("div",{className:"h-64 flex items-center justify-center",children:i?(0,r.jsx)("div",{className:"h-full w-full flex items-center justify-center",children:(0,r.jsx)("div",{className:"h-12 w-12 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"})}):Object.keys(u.byBucket||{}).length>0?(0,r.jsx)(N,{data:h,type:"pie",height:250,options:{plugins:{legend:{position:"bottom"}}}}):(0,r.jsx)("div",{className:"text-center text-gray-400",children:"No time data available"})})]})]}),(0,r.jsxs)("div",{className:"bg-gray-800 bg-opacity-60 rounded-lg border border-blue-500/20 p-4 backdrop-blur-sm",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-blue-300 mb-4",children:"Time Allocation"}),(0,r.jsx)(J,{data:Object.entries(u.byBucket||{}).map(e=>{let[t,s]=e;return{name:t,value:s,percentage:g>0?(s/g*100).toFixed(1):0}}),isLoading:i})]})]})}let G={"list-check":(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),percent:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),flame:(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 18.657A8 8 0 016.343 7.343S7 9 9 10c0-2 .5-5 2.986-7C14 5 16.09 5.777 17.656 7.343A7.975 7.975 0 0120 13a7.975 7.975 0 01-2.343 5.657z"}),(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.879 16.121A3 3 0 1012.015 11L11 14H9c0 .768.293 1.536.879 2.121z"})]}),trophy:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})})},X={blue:"from-blue-400 to-blue-600",purple:"from-purple-400 to-purple-600",green:"from-green-400 to-green-600",amber:"from-amber-400 to-amber-600",red:"from-red-400 to-red-600"};function Y(e){let{title:t,value:s,unit:a,icon:l,isLoading:n,color:i="blue"}=e,o=X[i]||X.blue;return n?(0,r.jsxs)("div",{className:"bg-gray-800 bg-opacity-60 rounded-lg border border-blue-500/20 p-4 backdrop-blur-sm animate-pulse",children:[(0,r.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,r.jsx)("div",{className:"h-4 w-24 bg-gray-700 rounded"}),(0,r.jsx)("div",{className:"h-8 w-8 bg-gray-700 rounded-full"})]}),(0,r.jsx)("div",{className:"h-8 w-20 bg-gray-700 rounded mt-4"})]}):(0,r.jsxs)("div",{className:"bg-gray-800 bg-opacity-60 rounded-lg border border-blue-500/20 p-4 backdrop-blur-sm transition-all duration-300 hover:shadow-lg hover:shadow-blue-500/10 hover:scale-[1.02]",children:[(0,r.jsxs)("div",{className:"flex justify-between items-start",children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-gray-400",children:t}),(0,r.jsx)("div",{className:"p-2 rounded-full bg-gradient-to-br ".concat(o," bg-opacity-20 text-white"),children:G[l]||(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})})]}),(0,r.jsxs)("div",{className:"mt-4 flex items-baseline",children:[(0,r.jsx)("span",{className:"text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r ".concat(o),children:s}),a&&(0,r.jsx)("span",{className:"ml-1 text-sm text-gray-400",children:a})]})]})}function Z(e){let{data:t,startDate:s,endDate:a,isLoading:l}=e,n=((e,t)=>{let s=[],r=new Date(e);for(;r<=t;)s.push(new Date(r)),r.setDate(r.getDate()+1);return s})(s,a).reduce((e,t)=>{let s=t.toLocaleDateString("en-US",{month:"long",year:"numeric"});return e[s]||(e[s]=[]),e[s].push(t),e},{}),i=e=>{let s=t[e.toISOString().split("T")[0]];return s&&s.total>0?Math.round(s.completed/s.total*100):0},o=e=>0===e?"bg-gray-800":e<25?"bg-red-900":e<50?"bg-red-700":e<75?"bg-amber-600":e<100?"bg-green-600":"bg-green-500";return l?(0,r.jsxs)("div",{className:"animate-pulse space-y-6",children:[(0,r.jsx)("div",{className:"h-6 w-48 bg-gray-700 rounded"}),(0,r.jsx)("div",{className:"grid grid-cols-7 gap-1",children:Array(35).fill(0).map((e,t)=>(0,r.jsx)("div",{className:"h-10 w-full bg-gray-700 rounded"},t))})]}):(0,r.jsxs)("div",{className:"space-y-8",children:[(0,r.jsxs)("div",{className:"flex flex-wrap items-center justify-center gap-4 pb-4",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"w-4 h-4 bg-gray-800 rounded-sm mr-2"}),(0,r.jsx)("span",{className:"text-sm text-gray-400",children:"Not tracked"})]}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"w-4 h-4 bg-red-900 rounded-sm mr-2"}),(0,r.jsx)("span",{className:"text-sm text-gray-400",children:"0-25%"})]}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"w-4 h-4 bg-red-700 rounded-sm mr-2"}),(0,r.jsx)("span",{className:"text-sm text-gray-400",children:"25-50%"})]}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"w-4 h-4 bg-amber-600 rounded-sm mr-2"}),(0,r.jsx)("span",{className:"text-sm text-gray-400",children:"50-75%"})]}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"w-4 h-4 bg-green-600 rounded-sm mr-2"}),(0,r.jsx)("span",{className:"text-sm text-gray-400",children:"75-99%"})]}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"w-4 h-4 bg-green-500 rounded-sm mr-2"}),(0,r.jsx)("span",{className:"text-sm text-gray-400",children:"100%"})]})]}),Object.entries(n).map(e=>{let[s,a]=e,l=Array(a[0].getDay()).fill(null);return(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("h4",{className:"text-lg font-medium text-white mb-2",children:s}),(0,r.jsx)("div",{className:"grid grid-cols-7 gap-1 text-center mb-1",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(e=>(0,r.jsx)("div",{className:"text-xs text-gray-500",children:e},e))}),(0,r.jsxs)("div",{className:"grid grid-cols-7 gap-1",children:[l.map((e,t)=>(0,r.jsx)("div",{className:"aspect-square"},"padding-".concat(t))),a.map(e=>{let s=e.toISOString().split("T")[0],a=t[s],l=i(e),n=o(l);return(0,r.jsxs)("div",{className:"aspect-square relative group ".concat(n," rounded-md transition-all duration-300 hover:scale-105 cursor-default"),children:[(0,r.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[(0,r.jsx)("span",{className:"text-white font-medium",children:e.getDate()}),a&&(0,r.jsxs)("span",{className:"text-xs text-white/70",children:[a.completed,"/",a.total]})]}),a&&(0,r.jsxs)("div",{className:"opacity-0 group-hover:opacity-100 absolute z-10 bottom-full mb-2 left-1/2 transform -translate-x-1/2 bg-gray-900 text-white text-xs px-2 py-1 rounded pointer-events-none whitespace-nowrap transition-opacity duration-200",children:[(0,r.jsx)("div",{className:"text-center font-medium mb-1",children:new Date(s).toLocaleDateString("en-US",{month:"short",day:"numeric"})}),(0,r.jsxs)("div",{children:["Completed: ",a.completed,"/",a.total]}),(0,r.jsxs)("div",{children:["Rate: ",l,"%"]})]})]},s)})]})]},s)})]})}function q(e){let{supabase:t,dateRange:s}=e,[l,n]=(0,a.useState)([]),[i,o]=(0,a.useState)([]),[d,c]=(0,a.useState)(!0),[u,m]=(0,a.useState)(null),[h,x]=(0,a.useState)({totalTracked:0,completionRate:0,currentStreak:0,longestStreak:0});(0,a.useEffect)(()=>{!async function(){c(!0),m(null);try{if(!t)throw Error("Supabase client is not available");if(!s||!s.startDate||!s.endDate)throw Error("Date range is invalid");let e=s.startDate.toISOString().split("T")[0],r=s.endDate.toISOString().split("T")[0],{data:a,error:l}=await t.from("habit_tracking").select("*").gte("habit_date",e).lte("habit_date",r).order("habit_date",{ascending:!0});if(l)throw l;let{data:i,error:d}=await t.from("habit_analytics").select("*").gte("date",e).lte("date",r).order("date",{ascending:!0}),c=Array.isArray(a)?a:[],u=Array.isArray(i)?i:[];if(n(c),o(u),c.length>0){let e=c.length,t=c.filter(e=>e.completed).length,s=e>0?(t/e*100).toFixed(1):0,r=[...c].sort((e,t)=>new Date(t.habit_date)-new Date(e.habit_date)),a=0;for(let e of r)if(e.completed)a++;else break;let l=0,n=0;for(let e of c)e.completed?++n>l&&(l=n):n=0;x({totalTracked:e,completionRate:s,currentStreak:a,longestStreak:l})}}catch(e){console.error("Error fetching habit data:",e),m(e.message)}finally{c(!1)}}()},[t,s]);let g={labels:Array.isArray(i)?i.map(e=>e.date||""):[],datasets:[{label:"Consistency Score",data:Array.isArray(i)?i.map(e=>e&&e.consistency_score||0):[],fill:!0,backgroundColor:"rgba(245, 158, 11, 0.2)",borderColor:"rgba(245, 158, 11, 0.8)",tension:.3}]},b=Object.entries(Array.isArray(l)?l.reduce((e,t)=>{let s=t.habit_name||"Unnamed";return e[s]||(e[s]=[]),e[s].push(t),e},{}):{}).map(e=>{let[t,s]=e,r=s.length,a=s.filter(e=>e.completed).length;return{name:t,rate:r>0?(a/r*100).toFixed(1):0,total:r,completed:a}}).sort((e,t)=>t.rate-e.rate),p={labels:b.map(e=>e.name),datasets:[{label:"Completion Rate (%)",data:b.map(e=>e.rate),backgroundColor:"rgba(245, 158, 11, 0.8)",borderWidth:0,borderRadius:4}]},v=Array.isArray(l)?l.reduce((e,t)=>{if(!t||!t.habit_date)return e;let s=t.habit_date;return e[s]||(e[s]={total:0,completed:0}),e[s].total++,t.completed&&e[s].completed++,e},{}):{};return u&&!d?(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-orbitron text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-purple-500",children:"Habit Tracker"}),(0,r.jsxs)("div",{className:"bg-red-900/20 border border-red-500 p-4 rounded-lg",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-red-400 mb-2",children:"Error Loading Data"}),(0,r.jsx)("p",{className:"text-white",children:u}),(0,r.jsx)("p",{className:"mt-4 text-gray-300",children:"Try refreshing the page or check your connection."})]})]}):(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-orbitron text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-purple-500",children:"Habit Tracker"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,r.jsx)(Y,{title:"Habits Tracked",value:h.totalTracked,icon:"list-check",color:"amber",isLoading:d}),(0,r.jsx)(Y,{title:"Completion Rate",value:"".concat(h.completionRate,"%"),icon:"percent",color:"green",isLoading:d}),(0,r.jsx)(Y,{title:"Current Streak",value:h.currentStreak,unit:"days",icon:"flame",color:"red",isLoading:d}),(0,r.jsx)(Y,{title:"Longest Streak",value:h.longestStreak,unit:"days",icon:"trophy",color:"blue",isLoading:d})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"bg-gray-800 bg-opacity-60 rounded-lg border border-blue-500/20 p-4 backdrop-blur-sm",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-blue-300 mb-4",children:"Consistency Score"}),(0,r.jsx)(N,{data:g,type:"line",height:300,isLoading:d||Array.isArray(i)&&0===i.length,options:{scales:{y:{suggestedMin:0,suggestedMax:100,title:{display:!0,text:"Score (%)"}}}}})]}),(0,r.jsxs)("div",{className:"bg-gray-800 bg-opacity-60 rounded-lg border border-blue-500/20 p-4 backdrop-blur-sm",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-blue-300 mb-4",children:"Habits by Completion Rate"}),(0,r.jsx)(N,{data:p,type:"bar",height:300,isLoading:d||0===b.length,options:{indexAxis:"y",scales:{x:{suggestedMin:0,suggestedMax:100,title:{display:!0,text:"Completion Rate (%)"}}}}})]})]}),(0,r.jsxs)("div",{className:"bg-gray-800 bg-opacity-60 rounded-lg border border-blue-500/20 p-4 backdrop-blur-sm",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-blue-300 mb-4",children:"Habit Calendar"}),(0,r.jsx)(Z,{data:v,startDate:s.startDate,endDate:s.endDate,isLoading:d})]})]})}function K(){let[e,t]=(0,a.useState)(!0),[s,l]=(0,a.useState)(null),[i,o]=(0,a.useState)("overview"),[u,x]=(0,a.useState)(!1),[g,b]=(0,a.useState)({startDate:new Date(Date.now()-2592e6),endDate:new Date}),[p,v]=(0,a.useState)({name:"Dashboard User",avatar:"/avatar-placeholder.png"});return((0,a.useEffect)(()=>{(async()=>{try{m()||console.warn("Supabase client could not be initialized. The app will use fallback data."),setTimeout(()=>{t(!1)},1e3)}catch(e){console.error("Error initializing app:",e),l(e.message),setTimeout(()=>{t(!1)},1e3)}})()},[]),e)?(0,r.jsx)(c,{}):(0,r.jsxs)("div",{className:"flex flex-col h-screen overflow-hidden bg-gradient-to-br from-gray-900 via-gray-900 to-gray-800",children:[(0,r.jsx)(d,{userData:p,dateRange:g,setDateRange:b,toggleSidebar:()=>{x(!u)}}),(0,r.jsxs)("div",{className:"flex flex-1 overflow-hidden",children:[u&&(0,r.jsx)("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-50 z-20 md:hidden",onClick:()=>x(!1)}),(0,r.jsx)(n,{activePanel:i,setActivePanel:o,isOpen:u,setIsOpen:x}),(0,r.jsx)("main",{className:"flex-1 overflow-y-auto p-4 sm:p-6",children:(()=>{if(s)return(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center h-full p-8",children:[(0,r.jsx)("div",{className:"text-xl text-red-400 mb-4",children:"Error loading dashboard"}),(0,r.jsx)("p",{className:"text-gray-400 max-w-md text-center mb-4",children:s}),(0,r.jsx)("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-blue-600 rounded text-white hover:bg-blue-700 transition-colors",children:"Retry"})]});switch(i){case"overview":default:return(0,r.jsx)(_,{dateRange:g});case"fitness":return(0,r.jsx)(I,{dateRange:g});case"time":return(0,r.jsx)(U,{dateRange:g});case"habits":return(0,r.jsx)(q,{dateRange:g})}})()})]}),(0,r.jsx)(h,{})]})}function Q(){return(0,r.jsx)(K,{})}},5152:function(e,t,s){e.exports=s(2602)}},function(e){e.O(0,[490,888,774,179],function(){return e(e.s=5557)}),_N_E=e.O()}]);